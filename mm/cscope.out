cscope 15 $HOME/pxt4/mm               0000091760
	@filemap.c

13 
	~<lšux/expÜt.h
>

14 
	~<lšux/compž”.h
>

15 
	~<lšux/dax.h
>

16 
	~<lšux/fs.h
>

17 
	~<lšux/sched/sigÇl.h
>

18 
	~<lšux/uacûss.h
>

19 
	~<lšux/ÿ·bž™y.h
>

20 
	~<lšux/k”Ãl_¡©.h
>

21 
	~<lšux/gå.h
>

22 
	~<lšux/mm.h
>

23 
	~<lšux/sw­.h
>

24 
	~<lšux/mmª.h
>

25 
	~<lšux/·gem­.h
>

26 
	~<lšux/fže.h
>

27 
	~<lšux/uio.h
>

28 
	~<lšux/”rÜ-šjeùiÚ.h
>

29 
	~<lšux/hash.h
>

30 
	~<lšux/wr™eback.h
>

31 
	~<lšux/backšg-dev.h
>

32 
	~<lšux/·gevec.h
>

33 
	~<lšux/blkdev.h
>

34 
	~<lšux/£cur™y.h
>

35 
	~<lšux/ýu£t.h
>

36 
	~<lšux/hug‘lb.h
>

37 
	~<lšux/memcÚŒÞ.h
>

38 
	~<lšux/þ—nÿche.h
>

39 
	~<lšux/shmem_fs.h
>

40 
	~<lšux/rm­.h
>

41 
	~<lšux/d–ayacù.h
>

42 
	~<lšux/psi.h
>

43 
	~<lšux/¿mfs.h
>

44 
	~"š‹º®.h
"

45 
	~"../ÿlþock.h
"

53 
	~<lšux/bufãr_h—d.h
>

55 
	~<asm/mmª.h
>

121 
	$·ge_ÿche_d–‘e
(
add»ss_¥aû
 *
m­pšg
,

122 
·ge
 *·ge, *
shadow
)

124 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
·ge
->
šdex
);

125 
Ä
 = 1;

127 
	`m­pšg_£t_upd©e
(&
xas
, 
m­pšg
);

130 ià(!
	`PageHuge
(
·ge
)) {

131 
	`xas_£t_Üd”
(&
xas
, 
·ge
->
šdex
, 
	`compound_Üd”
(page));

132 
Ä
 = 
	`compound_Ä
(
·ge
);

135 
	`VM_BUG_ON_PAGE
(!
	`PageLocked
(
·ge
),…age);

136 
	`VM_BUG_ON_PAGE
(
	`PageTaž
(
·ge
),…age);

137 
	`VM_BUG_ON_PAGE
(
Ä
 !ð1 && 
shadow
, 
·ge
);

139 
	`xas_¡Üe
(&
xas
, 
shadow
);

140 
	`xas_š™_m¬ks
(&
xas
);

142 
·ge
->
m­pšg
 = 
NULL
;

145 ià(
shadow
) {

146 
m­pšg
->
Äexû±iÚ®
 +ð
Ä
;

153 
	`smp_wmb
();

155 
m­pšg
->
Ä·ges
 -ð
Ä
;

156 
	}
}

158 
	$uÇccouÁ_·ge_ÿche_·ge
(
add»ss_¥aû
 *
m­pšg
,

159 
·ge
 *page)

161 
Ä
;

168 ià(
	`PageU±od©e
(
·ge
è&& 
	`PageM­³dToDisk
(page))

169 
	`þ—nÿche_put_·ge
(
·ge
);

171 
	`þ—nÿche_šv®id©e_·ge
(
m­pšg
, 
·ge
);

173 
	`VM_BUG_ON_PAGE
(
	`PageTaž
(
·ge
),…age);

174 
	`VM_BUG_ON_PAGE
(
	`·ge_m­³d
(
·ge
),…age);

175 ià(!
	`IS_ENABLED
(
CONFIG_DEBUG_VM
è&& 
	`uÆik–y
(
	`·ge_m­³d
(
·ge
))) {

176 
m­couÁ
;

178 
	`´_®”t
("BUG: Bad…age cache in…rocess %s…fn:%05lx\n",

179 
cu¼’t
->
comm
, 
	`·ge_to_pâ
(
·ge
));

180 
	`dump_·ge
(
·ge
, "still mapped when deleted");

181 
	`dump_¡ack
();

182 
	`add_št
(
TAINT_BAD_PAGE
, 
LOCKDEP_NOW_UNRELIABLE
);

184 
m­couÁ
 = 
	`·ge_m­couÁ
(
·ge
);

185 ià(
	`m­pšg_ex™šg
(
m­pšg
) &&

186 
	`·ge_couÁ
(
·ge
è>ð
m­couÁ
 + 2) {

193 
	`·ge_m­couÁ_»£t
(
·ge
);

194 
	`·ge_»f_sub
(
·ge
, 
m­couÁ
);

199 ià(
	`PageHuge
(
·ge
))

202 
Ä
 = 
	`h·ge_Ä_·ges
(
·ge
);

204 
	`__mod_node_·ge_¡©e
(
	`·ge_pgd©
(
·ge
), 
NR_FILE_PAGES
, -
Ä
);

205 ià(
	`PageSw­Backed
(
·ge
)) {

206 
	`__mod_node_·ge_¡©e
(
	`·ge_pgd©
(
·ge
), 
NR_SHMEM
, -
Ä
);

207 ià(
	`PageT¿nsHuge
(
·ge
))

208 
	`__dec_node_·ge_¡©e
(
·ge
, 
NR_SHMEM_THPS
);

209 } ià(
	`PageT¿nsHuge
(
·ge
)) {

210 
	`__dec_node_·ge_¡©e
(
·ge
, 
NR_FILE_THPS
);

211 
	`fžem­_Ä_thps_dec
(
m­pšg
);

224 ià(
	`WARN_ON_ONCE
(
	`PageDœty
(
·ge
)))

225 
	`accouÁ_·ge_þ—Ãd
(
·ge
, 
m­pšg
, 
	`šode_to_wb
(m­pšg->
ho¡
));

226 
	}
}

233 
	$__d–‘e_äom_·ge_ÿche
(
·ge
 *·ge, *
shadow
)

235 
add»ss_¥aû
 *
m­pšg
 = 
·ge
->mapping;

237 
	`Œaû_mm_fžem­_d–‘e_äom_·ge_ÿche
(
·ge
);

239 
	`uÇccouÁ_·ge_ÿche_·ge
(
m­pšg
, 
·ge
);

240 
	`·ge_ÿche_d–‘e
(
m­pšg
, 
·ge
, 
shadow
);

241 
	}
}

243 
	$·ge_ÿche_ä“_·ge
(
add»ss_¥aû
 *
m­pšg
,

244 
·ge
 *page)

246 (*
ä“·ge
)(
·ge
 *);

248 
ä“·ge
 = 
m­pšg
->
a_Ýs
->freepage;

249 ià(
ä“·ge
)

250 
	`ä“·ge
(
·ge
);

252 ià(
	`PageT¿nsHuge
(
·ge
è&& !
	`PageHuge
(page)) {

253 
	`·ge_»f_sub
(
·ge
, 
HPAGE_PMD_NR
);

254 
	`VM_BUG_ON_PAGE
(
	`·ge_couÁ
(
·ge
) <= 0,…age);

256 
	`put_·ge
(
·ge
);

258 
	}
}

268 
	$d–‘e_äom_·ge_ÿche
(
·ge
 *page)

270 
add»ss_¥aû
 *
m­pšg
 = 
	`·ge_m­pšg
(
·ge
);

271 
æags
;

273 
	`BUG_ON
(!
	`PageLocked
(
·ge
));

274 
	`xa_lock_œq§ve
(&
m­pšg
->
i_·ges
, 
æags
);

275 
	`__d–‘e_äom_·ge_ÿche
(
·ge
, 
NULL
);

276 
	`xa_uÆock_œq»¡Üe
(&
m­pšg
->
i_·ges
, 
æags
);

278 
	`·ge_ÿche_ä“_·ge
(
m­pšg
, 
·ge
);

279 
	}
}

280 
EXPORT_SYMBOL
(
d–‘e_äom_·ge_ÿche
);

296 
	$·ge_ÿche_d–‘e_b©ch
(
add»ss_¥aû
 *
m­pšg
,

297 
·gevec
 *
pvec
)

299 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
pvec
->
·ges
[0]->
šdex
);

300 
tÙ®_·ges
 = 0;

301 
i
 = 0;

302 
·ge
 *page;

304 
	`m­pšg_£t_upd©e
(&
xas
, 
m­pšg
);

305 
	`xas_fÜ_—ch
(&
xas
, 
·ge
, 
ULONG_MAX
) {

306 ià(
i
 >ð
	`·gevec_couÁ
(
pvec
))

310 ià(
	`xa_is_v®ue
(
·ge
))

319 ià(
·ge
 !ð
pvec
->
·ges
[
i
]) {

320 
	`VM_BUG_ON_PAGE
(
·ge
->
šdex
 > 
pvec
->
·ges
[
i
]->index,

321 
·ge
);

325 
	`WARN_ON_ONCE
(!
	`PageLocked
(
·ge
));

327 ià(
·ge
->
šdex
 =ð
xas
.
xa_šdex
)

328 
·ge
->
m­pšg
 = 
NULL
;

336 ià(
·ge
->
šdex
 + 
	`compound_Ä
Õageè- 1 =ð
xas
.
xa_šdex
)

337 
i
++;

338 
	`xas_¡Üe
(&
xas
, 
NULL
);

339 
tÙ®_·ges
++;

341 
m­pšg
->
Ä·ges
 -ð
tÙ®_·ges
;

342 
	}
}

344 
	$d–‘e_äom_·ge_ÿche_b©ch
(
add»ss_¥aû
 *
m­pšg
,

345 
·gevec
 *
pvec
)

347 
i
;

348 
æags
;

350 ià(!
	`·gevec_couÁ
(
pvec
))

353 
	`xa_lock_œq§ve
(&
m­pšg
->
i_·ges
, 
æags
);

354 
i
 = 0; i < 
	`·gevec_couÁ
(
pvec
); i++) {

355 
	`Œaû_mm_fžem­_d–‘e_äom_·ge_ÿche
(
pvec
->
·ges
[
i
]);

357 
	`uÇccouÁ_·ge_ÿche_·ge
(
m­pšg
, 
pvec
->
·ges
[
i
]);

359 
	`·ge_ÿche_d–‘e_b©ch
(
m­pšg
, 
pvec
);

360 
	`xa_uÆock_œq»¡Üe
(&
m­pšg
->
i_·ges
, 
æags
);

362 
i
 = 0; i < 
	`·gevec_couÁ
(
pvec
); i++)

363 
	`·ge_ÿche_ä“_·ge
(
m­pšg
, 
pvec
->
·ges
[
i
]);

364 
	}
}

366 
	$fžem­_check_”rÜs
(
add»ss_¥aû
 *
m­pšg
)

368 
»t
 = 0;

370 ià(
	`‹¡_b™
(
AS_ENOSPC
, &
m­pšg
->
æags
) &&

371 
	`‹¡_ªd_þ—r_b™
(
AS_ENOSPC
, &
m­pšg
->
æags
))

372 
»t
 = -
ENOSPC
;

373 ià(
	`‹¡_b™
(
AS_EIO
, &
m­pšg
->
æags
) &&

374 
	`‹¡_ªd_þ—r_b™
(
AS_EIO
, &
m­pšg
->
æags
))

375 
»t
 = -
EIO
;

376  
»t
;

377 
	}
}

378 
EXPORT_SYMBOL
(
fžem­_check_”rÜs
);

380 
	$fžem­_check_ªd_k“p_”rÜs
(
add»ss_¥aû
 *
m­pšg
)

383 ià(
	`‹¡_b™
(
AS_EIO
, &
m­pšg
->
æags
))

384  -
EIO
;

385 ià(
	`‹¡_b™
(
AS_ENOSPC
, &
m­pšg
->
æags
))

386  -
ENOSPC
;

388 
	}
}

407 
	$__fžem­_fd©awr™e_¿nge
(
add»ss_¥aû
 *
m­pšg
, 
loff_t
 
¡¬t
,

408 
loff_t
 
’d
, 
sync_mode
)

410 
»t
;

411 
wr™eback_cÚŒÞ
 
wbc
 = {

412 .
sync_mode
 = sync_mode,

413 .
Ä_to_wr™e
 = 
LONG_MAX
,

414 .
¿nge_¡¬t
 = 
¡¬t
,

415 .
¿nge_’d
 = 
’d
,

418 ià(!
	`m­pšg_ÿp_wr™eback_dœty
(
m­pšg
) ||

419 !
	`m­pšg_gged
(
m­pšg
, 
PAGECACHE_TAG_DIRTY
))

422 
	`wbc_©ch_fd©awr™e_šode
(&
wbc
, 
m­pšg
->
ho¡
);

423 
»t
 = 
	`do_wr™•ages
(
m­pšg
, &
wbc
);

424 
	`wbc_d‘ach_šode
(&
wbc
);

425  
»t
;

426 
	}
}

428 
šlše
 
	$__fžem­_fd©awr™e
(
add»ss_¥aû
 *
m­pšg
,

429 
sync_mode
)

431  
	`__fžem­_fd©awr™e_¿nge
(
m­pšg
, 0, 
LLONG_MAX
, 
sync_mode
);

432 
	}
}

434 
	$fžem­_fd©awr™e
(
add»ss_¥aû
 *
m­pšg
)

436  
	`__fžem­_fd©awr™e
(
m­pšg
, 
WB_SYNC_ALL
);

437 
	}
}

438 
EXPORT_SYMBOL
(
fžem­_fd©awr™e
);

440 
	$fžem­_fd©awr™e_¿nge
(
add»ss_¥aû
 *
m­pšg
, 
loff_t
 
¡¬t
,

441 
loff_t
 
’d
)

443  
	`__fžem­_fd©awr™e_¿nge
(
m­pšg
, 
¡¬t
, 
’d
, 
WB_SYNC_ALL
);

444 
	}
}

445 
EXPORT_SYMBOL
(
fžem­_fd©awr™e_¿nge
);

456 
	$fžem­_æush
(
add»ss_¥aû
 *
m­pšg
)

458  
	`__fžem­_fd©awr™e
(
m­pšg
, 
WB_SYNC_NONE
);

459 
	}
}

460 
EXPORT_SYMBOL
(
fžem­_æush
);

474 
boÞ
 
	$fžem­_¿nge_has_·ge
(
add»ss_¥aû
 *
m­pšg
,

475 
loff_t
 
¡¬t_by‹
,†off_ˆ
’d_by‹
)

477 
·ge
 *page;

478 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
¡¬t_by‹
 >> 
PAGE_SHIFT
);

479 
pgoff_t
 
max
 = 
’d_by‹
 >> 
PAGE_SHIFT
;

481 ià(
’d_by‹
 < 
¡¬t_by‹
)

482  
çl£
;

484 
	`rcu_»ad_lock
();

486 
·ge
 = 
	`xas_fšd
(&
xas
, 
max
);

487 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

490 ià(
	`xa_is_v®ue
(
·ge
))

499 
	`rcu_»ad_uÆock
();

501  
·ge
 !ð
NULL
;

502 
	}
}

503 
EXPORT_SYMBOL
(
fžem­_¿nge_has_·ge
);

505 
	$__fžem­_fd©awa™_¿nge
(
add»ss_¥aû
 *
m­pšg
,

506 
loff_t
 
¡¬t_by‹
,†off_ˆ
’d_by‹
)

508 
pgoff_t
 
šdex
 = 
¡¬t_by‹
 >> 
PAGE_SHIFT
;

509 
pgoff_t
 
’d
 = 
’d_by‹
 >> 
PAGE_SHIFT
;

510 
·gevec
 
pvec
;

511 
Ä_·ges
;

513 ià(
’d_by‹
 < 
¡¬t_by‹
)

516 
	`·gevec_š™
(&
pvec
);

517 
šdex
 <ð
’d
) {

518 
i
;

520 
Ä_·ges
 = 
	`·gevec_lookup_¿nge_g
(&
pvec
, 
m­pšg
, &
šdex
,

521 
’d
, 
PAGECACHE_TAG_WRITEBACK
);

522 ià(!
Ä_·ges
)

525 
i
 = 0; i < 
Ä_·ges
; i++) {

526 
·ge
 *·gð
pvec
.
·ges
[
i
];

528 
	`wa™_Ú_·ge_wr™eback
(
·ge
);

529 
	`CË¬PageE¼Ü
(
·ge
);

531 
	`·gevec_»Ëa£
(&
pvec
);

532 
	`cÚd_»sched
();

534 
	}
}

552 
	$fžem­_fd©awa™_¿nge
(
add»ss_¥aû
 *
m­pšg
, 
loff_t
 
¡¬t_by‹
,

553 
loff_t
 
’d_by‹
)

555 
	`__fžem­_fd©awa™_¿nge
(
m­pšg
, 
¡¬t_by‹
, 
’d_by‹
);

556  
	`fžem­_check_”rÜs
(
m­pšg
);

557 
	}
}

558 
EXPORT_SYMBOL
(
fžem­_fd©awa™_¿nge
);

574 
	$fžem­_fd©awa™_¿nge_k“p_”rÜs
(
add»ss_¥aû
 *
m­pšg
,

575 
loff_t
 
¡¬t_by‹
,†off_ˆ
’d_by‹
)

577 
	`__fžem­_fd©awa™_¿nge
(
m­pšg
, 
¡¬t_by‹
, 
’d_by‹
);

578  
	`fžem­_check_ªd_k“p_”rÜs
(
m­pšg
);

579 
	}
}

580 
EXPORT_SYMBOL
(
fžem­_fd©awa™_¿nge_k“p_”rÜs
);

598 
	$fže_fd©awa™_¿nge
(
fže
 *fže, 
loff_t
 
¡¬t_by‹
,†off_ˆ
’d_by‹
)

600 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

602 
	`__fžem­_fd©awa™_¿nge
(
m­pšg
, 
¡¬t_by‹
, 
’d_by‹
);

603  
	`fže_check_ªd_advªû_wb_”r
(
fže
);

604 
	}
}

605 
EXPORT_SYMBOL
(
fže_fd©awa™_¿nge
);

621 
	$fžem­_fd©awa™_k“p_”rÜs
(
add»ss_¥aû
 *
m­pšg
)

623 
	`__fžem­_fd©awa™_¿nge
(
m­pšg
, 0, 
LLONG_MAX
);

624  
	`fžem­_check_ªd_k“p_”rÜs
(
m­pšg
);

625 
	}
}

626 
EXPORT_SYMBOL
(
fžem­_fd©awa™_k“p_”rÜs
);

629 
boÞ
 
	$m­pšg_Ãeds_wr™eback
(
add»ss_¥aû
 *
m­pšg
)

631 ià(
	`dax_m­pšg
(
m­pšg
))

632  
m­pšg
->
Äexû±iÚ®
;

634  
m­pšg
->
Ä·ges
;

635 
	}
}

637 
	$fžem­_wr™e_ªd_wa™
(
add»ss_¥aû
 *
m­pšg
)

639 
”r
 = 0;

641 ià(
	`m­pšg_Ãeds_wr™eback
(
m­pšg
)) {

642 
”r
 = 
	`fžem­_fd©awr™e
(
m­pšg
);

649 ià(
”r
 !ð-
EIO
) {

650 
”r2
 = 
	`fžem­_fd©awa™
(
m­pšg
);

651 ià(!
”r
)

652 
”r
 = 
”r2
;

655 
	`fžem­_check_”rÜs
(
m­pšg
);

658 
”r
 = 
	`fžem­_check_”rÜs
(
m­pšg
);

660  
”r
;

661 
	}
}

662 
EXPORT_SYMBOL
(
fžem­_wr™e_ªd_wa™
);

677 
	$fžem­_wr™e_ªd_wa™_¿nge
(
add»ss_¥aû
 *
m­pšg
,

678 
loff_t
 
l¡¬t
,†off_ˆ
Ënd
)

680 
”r
 = 0;

682 ià(
	`m­pšg_Ãeds_wr™eback
(
m­pšg
)) {

683 
”r
 = 
	`__fžem­_fd©awr™e_¿nge
(
m­pšg
, 
l¡¬t
, 
Ënd
,

684 
WB_SYNC_ALL
);

686 ià(
”r
 !ð-
EIO
) {

687 
”r2
 = 
	`fžem­_fd©awa™_¿nge
(
m­pšg
,

688 
l¡¬t
, 
Ënd
);

689 ià(!
”r
)

690 
”r
 = 
”r2
;

693 
	`fžem­_check_”rÜs
(
m­pšg
);

696 
”r
 = 
	`fžem­_check_”rÜs
(
m­pšg
);

698  
”r
;

699 
	}
}

700 
EXPORT_SYMBOL
(
fžem­_wr™e_ªd_wa™_¿nge
);

702 
	$__fžem­_£t_wb_”r
(
add»ss_¥aû
 *
m­pšg
, 
”r
)

704 
”r£q_t
 
e£q
 = 
	`”r£q_£t
(&
m­pšg
->
wb_”r
, 
”r
);

706 
	`Œaû_fžem­_£t_wb_”r
(
m­pšg
, 
e£q
);

707 
	}
}

708 
EXPORT_SYMBOL
(
__fžem­_£t_wb_”r
);

734 
	$fže_check_ªd_advªû_wb_”r
(
fže
 *file)

736 
”r
 = 0;

737 
”r£q_t
 
Þd
 = 
	`READ_ONCE
(
fže
->
f_wb_”r
);

738 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

741 ià(
	`”r£q_check
(&
m­pšg
->
wb_”r
, 
Þd
)) {

743 
	`¥š_lock
(&
fže
->
f_lock
);

744 
Þd
 = 
fže
->
f_wb_”r
;

745 
”r
 = 
	`”r£q_check_ªd_advªû
(&
m­pšg
->
wb_”r
,

746 &
fže
->
f_wb_”r
);

747 
	`Œaû_fže_check_ªd_advªû_wb_”r
(
fže
, 
Þd
);

748 
	`¥š_uÆock
(&
fže
->
f_lock
);

756 
	`þ—r_b™
(
AS_EIO
, &
m­pšg
->
æags
);

757 
	`þ—r_b™
(
AS_ENOSPC
, &
m­pšg
->
æags
);

758  
”r
;

759 
	}
}

760 
EXPORT_SYMBOL
(
fže_check_ªd_advªû_wb_”r
);

778 
	$fže_wr™e_ªd_wa™_¿nge
(
fže
 *fže, 
loff_t
 
l¡¬t
,†off_ˆ
Ënd
)

780 
”r
 = 0, 
”r2
;

781 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

783 ià(
	`m­pšg_Ãeds_wr™eback
(
m­pšg
)) {

784 
”r
 = 
	`__fžem­_fd©awr™e_¿nge
(
m­pšg
, 
l¡¬t
, 
Ënd
,

785 
WB_SYNC_ALL
);

787 ià(
”r
 !ð-
EIO
)

788 
	`__fžem­_fd©awa™_¿nge
(
m­pšg
, 
l¡¬t
, 
Ënd
);

790 
”r2
 = 
	`fže_check_ªd_advªû_wb_”r
(
fže
);

791 ià(!
”r
)

792 
”r
 = 
”r2
;

793  
”r
;

794 
	}
}

795 
EXPORT_SYMBOL
(
fže_wr™e_ªd_wa™_¿nge
);

813 
	$»¶aû_·ge_ÿche_·ge
(
·ge
 *
Þd
, ·g*
Ãw
, 
gå_t
 
gå_mask
)

815 
add»ss_¥aû
 *
m­pšg
 = 
Þd
->mapping;

816 (*
ä“·ge
)(
·ge
 *èð
m­pšg
->
a_Ýs
->freepage;

817 
pgoff_t
 
off£t
 = 
Þd
->
šdex
;

818 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
off£t
);

819 
æags
;

821 
	`VM_BUG_ON_PAGE
(!
	`PageLocked
(
Þd
), old);

822 
	`VM_BUG_ON_PAGE
(!
	`PageLocked
(
Ãw
),‚ew);

823 
	`VM_BUG_ON_PAGE
(
Ãw
->
m­pšg
,‚ew);

825 
	`g‘_·ge
(
Ãw
);

826 
Ãw
->
m­pšg
 = mapping;

827 
Ãw
->
šdex
 = 
off£t
;

829 
	`xas_lock_œq§ve
(&
xas
, 
æags
);

830 
	`xas_¡Üe
(&
xas
, 
Ãw
);

832 
Þd
->
m­pšg
 = 
NULL
;

834 ià(!
	`PageHuge
(
Þd
))

835 
	`__dec_node_·ge_¡©e
(
Ãw
, 
NR_FILE_PAGES
);

836 ià(!
	`PageHuge
(
Ãw
))

837 
	`__šc_node_·ge_¡©e
(
Ãw
, 
NR_FILE_PAGES
);

838 ià(
	`PageSw­Backed
(
Þd
))

839 
	`__dec_node_·ge_¡©e
(
Ãw
, 
NR_SHMEM
);

840 ià(
	`PageSw­Backed
(
Ãw
))

841 
	`__šc_node_·ge_¡©e
(
Ãw
, 
NR_SHMEM
);

842 
	`xas_uÆock_œq»¡Üe
(&
xas
, 
æags
);

843 
	`mem_cgroup_mig¿‹
(
Þd
, 
Ãw
);

844 ià(
ä“·ge
)

845 
	`ä“·ge
(
Þd
);

846 
	`put_·ge
(
Þd
);

849 
	}
}

850 
EXPORT_SYMBOL_GPL
(
»¶aû_·ge_ÿche_·ge
);

852 
nošlše
 
	$__add_to_·ge_ÿche_locked
(
·ge
 *page,

853 
add»ss_¥aû
 *
m­pšg
,

854 
pgoff_t
 
off£t
, 
gå_t
 
gå_mask
,

855 **
shadowp
)

857 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
off£t
);

858 
huge
 = 
	`PageHuge
(
·ge
);

859 
mem_cgroup
 *
memcg
;

860 
”rÜ
;

862 
	`VM_BUG_ON_PAGE
(!
	`PageLocked
(
·ge
),…age);

863 
	`VM_BUG_ON_PAGE
(
	`PageSw­Backed
(
·ge
),…age);

864 
	`m­pšg_£t_upd©e
(&
xas
, 
m­pšg
);

866 ià(!
huge
) {

867 
”rÜ
 = 
	`mem_cgroup_Œy_ch¬ge
(
·ge
, 
cu¼’t
->
mm
,

868 
gå_mask
, &
memcg
, 
çl£
);

869 ià(
”rÜ
)

870  
”rÜ
;

873 
	`g‘_·ge
(
·ge
);

874 
·ge
->
m­pšg
 = mapping;

875 
·ge
->
šdex
 = 
off£t
;

876 
gå_mask
 &ð
GFP_RECLAIM_MASK
;

879 
Üd”
 = 
	`xa_g‘_Üd”
(
xas
.
xa
, xas.
xa_šdex
);

880 *
’Œy
, *
Þd
 = 
NULL
;

882 ià(
Üd”
 > 
	`thp_Üd”
(
·ge
))

883 
	`xas_¥l™_®loc
(&
xas
, 
	`xa_lßd
(xas.
xa
, xas.
xa_šdex
),

884 
Üd”
, 
gå_mask
);

885 
	`xas_lock_œq
(&
xas
);

886 
	`xas_fÜ_—ch_cÚæiù
(&
xas
, 
’Œy
) {

887 
Þd
 = 
’Œy
;

888 ià(!
	`xa_is_v®ue
(
’Œy
)) {

889 
	`xas_£t_”r
(&
xas
, -
EEXIST
);

890 
uÆock
;

894 ià(
Þd
) {

895 ià(
shadowp
)

896 *
shadowp
 = 
Þd
;

898 
Üd”
 = 
	`xa_g‘_Üd”
(
xas
.
xa
, xas.
xa_šdex
);

899 ià(
Üd”
 > 
	`thp_Üd”
(
·ge
)) {

900 
	`xas_¥l™
(&
xas
, 
Þd
, 
Üd”
);

901 
	`xas_»£t
(&
xas
);

905 
	`xas_¡Üe
(&
xas
, 
·ge
);

906 ià(
	`xas_”rÜ
(&
xas
))

907 
uÆock
;

909 ià(
Þd
)

910 
m­pšg
->
Äexû±iÚ®
--;

911 
m­pšg
->
Ä·ges
++;

914 ià(!
huge
)

915 
	`__šc_node_·ge_¡©e
(
·ge
, 
NR_FILE_PAGES
);

916 
uÆock
:

917 
	`xas_uÆock_œq
(&
xas
);

918 } 
	`xas_nomem
(&
xas
, 
gå_mask
));

920 ià(
	`xas_”rÜ
(&
xas
))

921 
”rÜ
;

923 ià(!
huge
)

924 
	`mem_cgroup_comm™_ch¬ge
(
·ge
, 
memcg
, 
çl£
, false);

925 
	`Œaû_mm_fžem­_add_to_·ge_ÿche
(
·ge
);

927 
”rÜ
:

928 
·ge
->
m­pšg
 = 
NULL
;

930 ià(!
huge
)

931 
	`mem_cgroup_ÿnûl_ch¬ge
(
·ge
, 
memcg
, 
çl£
);

932 
	`put_·ge
(
·ge
);

933  
	`xas_”rÜ
(&
xas
);

934 
	}
}

935 
ALLOW_ERROR_INJECTION
(
__add_to_·ge_ÿche_locked
, 
ERRNO
);

949 
	$add_to_·ge_ÿche_locked
(
·ge
 *·ge, 
add»ss_¥aû
 *
m­pšg
,

950 
pgoff_t
 
off£t
, 
gå_t
 
gå_mask
)

952  
	`__add_to_·ge_ÿche_locked
(
·ge
, 
m­pšg
, 
off£t
,

953 
gå_mask
, 
NULL
);

954 
	}
}

955 
EXPORT_SYMBOL
(
add_to_·ge_ÿche_locked
);

957 
	$add_to_·ge_ÿche_Ìu
(
·ge
 *·ge, 
add»ss_¥aû
 *
m­pšg
,

958 
pgoff_t
 
off£t
, 
gå_t
 
gå_mask
)

960 *
shadow
 = 
NULL
;

961 
»t
;

963 
	`__S‘PageLocked
(
·ge
);

964 
»t
 = 
	`__add_to_·ge_ÿche_locked
(
·ge
, 
m­pšg
, 
off£t
,

965 
gå_mask
, &
shadow
);

966 ià(
	`uÆik–y
(
»t
))

967 
	`__CË¬PageLocked
(
·ge
);

977 
	`WARN_ON_ONCE
(
	`PageAùive
(
·ge
));

978 ià(!(
gå_mask
 & 
__GFP_WRITE
è&& 
shadow
)

979 
	`wÜkšg£t_»çuÉ
(
·ge
, 
shadow
);

980 
	`Ìu_ÿche_add
(
·ge
);

982  
»t
;

983 
	}
}

984 
EXPORT_SYMBOL_GPL
(
add_to_·ge_ÿche_Ìu
);

986 #ifdeà
CONFIG_NUMA


987 
·ge
 *
	$__·ge_ÿche_®loc
(
gå_t
 
gå
)

989 
n
;

990 
·ge
 *page;

992 ià(
	`ýu£t_do_·ge_mem_¥»ad
()) {

993 
ýu£t_mems_cook›
;

995 
ýu£t_mems_cook›
 = 
	`»ad_mems_®lowed_begš
();

996 
n
 = 
	`ýu£t_mem_¥»ad_node
();

997 
·ge
 = 
	`__®loc_·ges_node
(
n
, 
gå
, 0);

998 } !
·ge
 && 
	`»ad_mems_®lowed_»Œy
(
ýu£t_mems_cook›
));

1000  
·ge
;

1002  
	`®loc_·ges
(
gå
, 0);

1003 
	}
}

1004 
EXPORT_SYMBOL
(
__·ge_ÿche_®loc
);

1017 
	#PAGE_WAIT_TABLE_BITS
 8

	)

1018 
	#PAGE_WAIT_TABLE_SIZE
 (1 << 
PAGE_WAIT_TABLE_BITS
)

	)

1019 
wa™_queue_h—d_t
 
	g·ge_wa™_bË
[
PAGE_WAIT_TABLE_SIZE
] 
	g__ÿch–še_®igÃd
;

1021 
wa™_queue_h—d_t
 *
	$·ge_wa™queue
(
·ge
 *page)

1023  &
·ge_wa™_bË
[
	`hash_±r
(
·ge
, 
PAGE_WAIT_TABLE_BITS
)];

1024 
	}
}

1026 
__š™
 
	$·geÿche_š™
()

1028 
i
;

1030 
i
 = 0; i < 
PAGE_WAIT_TABLE_SIZE
; i++)

1031 
	`š™_wa™queue_h—d
(&
·ge_wa™_bË
[
i
]);

1033 
	`·ge_wr™eback_š™
();

1034 
	}
}

1037 
	swa™_·ge_key
 {

1038 
·ge
 *
	m·ge
;

1039 
	mb™_Ä
;

1040 
	m·ge_m©ch
;

1043 
	swa™_·ge_queue
 {

1044 
·ge
 *
	m·ge
;

1045 
	mb™_Ä
;

1046 
wa™_queue_’Œy_t
 
	mwa™
;

1049 
	$wake_·ge_funùiÚ
(
wa™_queue_’Œy_t
 *
wa™
, 
mode
, 
sync
, *
¬g
)

1051 
wa™_·ge_key
 *
key
 = 
¬g
;

1052 
wa™_·ge_queue
 *
wa™_·ge


1053 ð
	`cÚš”_of
(
wa™
, 
wa™_·ge_queue
, wait);

1055 ià(
wa™_·ge
->
·ge
 !ð
key
->page)

1057 
key
->
·ge_m©ch
 = 1;

1059 ià(
wa™_·ge
->
b™_Ä
 !ð
key
->bit_nr)

1070 ià(
	`‹¡_b™
(
key
->
b™_Ä
, &key->
·ge
->
æags
))

1073  
	`autÜemove_wake_funùiÚ
(
wa™
, 
mode
, 
sync
, 
key
);

1074 
	}
}

1076 
	$wake_up_·ge_b™
(
·ge
 *·ge, 
b™_Ä
)

1078 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1079 
wa™_·ge_key
 
key
;

1080 
æags
;

1081 
wa™_queue_’Œy_t
 
bookm¬k
;

1083 
key
.
·ge
 =…age;

1084 
key
.
b™_Ä
 = bit_nr;

1085 
key
.
·ge_m©ch
 = 0;

1087 
bookm¬k
.
æags
 = 0;

1088 
bookm¬k
.
´iv©e
 = 
NULL
;

1089 
bookm¬k
.
func
 = 
NULL
;

1090 
	`INIT_LIST_HEAD
(&
bookm¬k
.
’Œy
);

1092 
	`¥š_lock_œq§ve
(&
q
->
lock
, 
æags
);

1093 
	`__wake_up_locked_key_bookm¬k
(
q
, 
TASK_NORMAL
, &
key
, &
bookm¬k
);

1095 
bookm¬k
.
æags
 & 
WQ_FLAG_BOOKMARK
) {

1102 
	`¥š_uÆock_œq»¡Üe
(&
q
->
lock
, 
æags
);

1103 
	`ýu_»Ïx
();

1104 
	`¥š_lock_œq§ve
(&
q
->
lock
, 
æags
);

1105 
	`__wake_up_locked_key_bookm¬k
(
q
, 
TASK_NORMAL
, &
key
, &
bookm¬k
);

1117 ià(!
	`wa™queue_aùive
(
q
è|| !
key
.
·ge_m©ch
) {

1118 
	`CË¬PageWa™”s
(
·ge
);

1127 
	`¥š_uÆock_œq»¡Üe
(&
q
->
lock
, 
æags
);

1128 
	}
}

1130 
	$wake_up_·ge
(
·ge
 *·ge, 
b™
)

1132 ià(!
	`PageWa™”s
(
·ge
))

1134 
	`wake_up_·ge_b™
(
·ge
, 
b™
);

1135 
	}
}

1140 
	ebehaviÜ
 {

1141 
	mEXCLUSIVE
,

1144 
	mSHARED
,

1147 
	mDROP
,

1152 
šlše
 
	$wa™_Ú_·ge_b™_commÚ
(
wa™_queue_h—d_t
 *
q
,

1153 
·ge
 *·ge, 
b™_Ä
, 
¡©e
, 
behaviÜ
 behavior)

1155 
wa™_·ge_queue
 
wa™_·ge
;

1156 
wa™_queue_’Œy_t
 *
wa™
 = &
wa™_·ge
.wait;

1157 
boÞ
 
b™_is_£t
;

1158 
boÞ
 
th¿shšg
 = 
çl£
;

1159 
boÞ
 
d–ayacù
 = 
çl£
;

1160 
pæags
;

1161 
»t
 = 0;

1163 ià(
b™_Ä
 =ð
PG_locked
 &&

1164 !
	`PageU±od©e
(
·ge
è&& 
	`PageWÜkšg£t
(page)) {

1165 ià(!
	`PageSw­Backed
(
·ge
)) {

1166 
	`d–ayacù_th¿shšg_¡¬t
();

1167 
d–ayacù
 = 
Œue
;

1169 
	`psi_mem¡®l_’‹r
(&
pæags
);

1170 
th¿shšg
 = 
Œue
;

1173 
	`š™_wa™
(
wa™
);

1174 
wa™
->
æags
 = 
behaviÜ
 =ð
EXCLUSIVE
 ? 
WQ_FLAG_EXCLUSIVE
 : 0;

1175 
wa™
->
func
 = 
wake_·ge_funùiÚ
;

1176 
wa™_·ge
.
·ge
 =…age;

1177 
wa™_·ge
.
b™_Ä
 = bit_nr;

1180 
	`¥š_lock_œq
(&
q
->
lock
);

1182 ià(
	`lik–y
(
	`li¡_em±y
(&
wa™
->
’Œy
))) {

1183 
	`__add_wa™_queue_’Œy_ž
(
q
, 
wa™
);

1184 
	`S‘PageWa™”s
(
·ge
);

1187 
	`£t_cu¼’t_¡©e
(
¡©e
);

1189 
	`¥š_uÆock_œq
(&
q
->
lock
);

1191 
b™_is_£t
 = 
	`‹¡_b™
(
b™_Ä
, &
·ge
->
æags
);

1192 ià(
behaviÜ
 =ð
DROP
)

1193 
	`put_·ge
(
·ge
);

1195 ià(
	`lik–y
(
b™_is_£t
))

1196 
	`io_scheduË
();

1198 ià(
behaviÜ
 =ð
EXCLUSIVE
) {

1199 ià(!
	`‹¡_ªd_£t_b™_lock
(
b™_Ä
, &
·ge
->
æags
))

1201 } ià(
behaviÜ
 =ð
SHARED
) {

1202 ià(!
	`‹¡_b™
(
b™_Ä
, &
·ge
->
æags
))

1206 ià(
	`sigÇl_³ndšg_¡©e
(
¡©e
, 
cu¼’t
)) {

1207 
»t
 = -
EINTR
;

1211 ià(
behaviÜ
 =ð
DROP
) {

1223 
	`fšish_wa™
(
q
, 
wa™
);

1225 ià(
th¿shšg
) {

1226 ià(
d–ayacù
)

1227 
	`d–ayacù_th¿shšg_’d
();

1228 
	`psi_mem¡®l_Ëave
(&
pæags
);

1239  
»t
;

1240 
	}
}

1242 
	$wa™_Ú_·ge_b™
(
·ge
 *·ge, 
b™_Ä
)

1244 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1245 
	`wa™_Ú_·ge_b™_commÚ
(
q
, 
·ge
, 
b™_Ä
, 
TASK_UNINTERRUPTIBLE
, 
SHARED
);

1246 
	}
}

1247 
EXPORT_SYMBOL
(
wa™_Ú_·ge_b™
);

1249 
	$wa™_Ú_·ge_b™_kžÏbË
(
·ge
 *·ge, 
b™_Ä
)

1251 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1252  
	`wa™_Ú_·ge_b™_commÚ
(
q
, 
·ge
, 
b™_Ä
, 
TASK_KILLABLE
, 
SHARED
);

1253 
	}
}

1254 
EXPORT_SYMBOL
(
wa™_Ú_·ge_b™_kžÏbË
);

1266 
	$put_ªd_wa™_Ú_·ge_locked
(
·ge
 *page)

1268 
wa™_queue_h—d_t
 *
q
;

1270 
·ge
 = 
	`compound_h—d
(page);

1271 
q
 = 
	`·ge_wa™queue
(
·ge
);

1272 
	`wa™_Ú_·ge_b™_commÚ
(
q
, 
·ge
, 
PG_locked
, 
TASK_UNINTERRUPTIBLE
, 
DROP
);

1273 
	}
}

1282 
	$add_·ge_wa™_queue
(
·ge
 *·ge, 
wa™_queue_’Œy_t
 *
wa™”
)

1284 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1285 
æags
;

1287 
	`¥š_lock_œq§ve
(&
q
->
lock
, 
æags
);

1288 
	`__add_wa™_queue_’Œy_ž
(
q
, 
wa™”
);

1289 
	`S‘PageWa™”s
(
·ge
);

1290 
	`¥š_uÆock_œq»¡Üe
(&
q
->
lock
, 
æags
);

1291 
	}
}

1292 
EXPORT_SYMBOL_GPL
(
add_·ge_wa™_queue
);

1294 #iâdeà
þ—r_b™_uÆock_is_Ãg©ive_by‹


1308 
šlše
 
boÞ
 
	$þ—r_b™_uÆock_is_Ãg©ive_by‹
(
Ä
, vÞ©ž*
mem
)

1310 
	`þ—r_b™_uÆock
(
Ä
, 
mem
);

1312  
	`‹¡_b™
(
PG_wa™”s
, 
mem
);

1313 
	}
}

1332 
	$uÆock_·ge
(
·ge
 *page)

1334 
	`BUILD_BUG_ON
(
PG_wa™”s
 != 7);

1335 
·ge
 = 
	`compound_h—d
(page);

1336 
	`VM_BUG_ON_PAGE
(!
	`PageLocked
(
·ge
),…age);

1337 ià(
	`þ—r_b™_uÆock_is_Ãg©ive_by‹
(
PG_locked
, &
·ge
->
æags
))

1338 
	`wake_up_·ge_b™
(
·ge
, 
PG_locked
);

1339 
	}
}

1340 
EXPORT_SYMBOL
(
uÆock_·ge
);

1346 
	$’d_·ge_wr™eback
(
·ge
 *page)

1355 ià(
	`PageReþaim
(
·ge
)) {

1356 
	`CË¬PageReþaim
(
·ge
);

1357 
	`rÙ©e_»þaimabË_·ge
(
·ge
);

1360 ià(!
	`‹¡_þ—r_·ge_wr™eback
(
·ge
))

1361 
	`BUG
();

1363 
	`smp_mb__aá”_©omic
();

1364 
	`wake_up_·ge
(
·ge
, 
PG_wr™eback
);

1365 
	}
}

1366 
EXPORT_SYMBOL
(
’d_·ge_wr™eback
);

1372 
	$·ge_’dio
(
·ge
 *·ge, 
boÞ
 
is_wr™e
, 
”r
)

1374 ià(!
is_wr™e
) {

1375 ià(!
”r
) {

1376 
	`S‘PageU±od©e
(
·ge
);

1378 
	`CË¬PageU±od©e
(
·ge
);

1379 
	`S‘PageE¼Ü
(
·ge
);

1381 
	`uÆock_·ge
(
·ge
);

1383 ià(
”r
) {

1384 
add»ss_¥aû
 *
m­pšg
;

1386 
	`S‘PageE¼Ü
(
·ge
);

1387 
m­pšg
 = 
	`·ge_m­pšg
(
·ge
);

1388 ià(
m­pšg
)

1389 
	`m­pšg_£t_”rÜ
(
m­pšg
, 
”r
);

1391 
	`’d_·ge_wr™eback
(
·ge
);

1393 
	}
}

1394 
EXPORT_SYMBOL_GPL
(
·ge_’dio
);

1400 
	$__lock_·ge
(
·ge
 *
__·ge
)

1402 
·ge
 *·gð
	`compound_h—d
(
__·ge
);

1403 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1404 
	`wa™_Ú_·ge_b™_commÚ
(
q
, 
·ge
, 
PG_locked
, 
TASK_UNINTERRUPTIBLE
,

1405 
EXCLUSIVE
);

1406 
	}
}

1407 
EXPORT_SYMBOL
(
__lock_·ge
);

1409 
	$__lock_·ge_kžÏbË
(
·ge
 *
__·ge
)

1411 
·ge
 *·gð
	`compound_h—d
(
__·ge
);

1412 
wa™_queue_h—d_t
 *
q
 = 
	`·ge_wa™queue
(
·ge
);

1413  
	`wa™_Ú_·ge_b™_commÚ
(
q
, 
·ge
, 
PG_locked
, 
TASK_KILLABLE
,

1414 
EXCLUSIVE
);

1415 
	}
}

1416 
EXPORT_SYMBOL_GPL
(
__lock_·ge_kžÏbË
);

1429 
	$__lock_·ge_Ü_»Œy
(
·ge
 *·ge, 
mm_¡ruù
 *
mm
,

1430 
æags
)

1432 ià(
æags
 & 
FAULT_FLAG_ALLOW_RETRY
) {

1437 ià(
æags
 & 
FAULT_FLAG_RETRY_NOWAIT
)

1440 
	`up_»ad
(&
mm
->
mm­_£m
);

1441 ià(
æags
 & 
FAULT_FLAG_KILLABLE
)

1442 
	`wa™_Ú_·ge_locked_kžÏbË
(
·ge
);

1444 
	`wa™_Ú_·ge_locked
(
·ge
);

1447 ià(
æags
 & 
FAULT_FLAG_KILLABLE
) {

1448 
»t
;

1450 
»t
 = 
	`__lock_·ge_kžÏbË
(
·ge
);

1451 ià(
»t
) {

1452 
	`up_»ad
(&
mm
->
mm­_£m
);

1456 
	`__lock_·ge
(
·ge
);

1459 
	}
}

1480 
pgoff_t
 
	$·ge_ÿche_Ãxt_miss
(
add»ss_¥aû
 *
m­pšg
,

1481 
pgoff_t
 
šdex
, 
max_sÿn
)

1483 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
šdex
);

1485 
max_sÿn
--) {

1486 *
’Œy
 = 
	`xas_Ãxt
(&
xas
);

1487 ià(!
’Œy
 || 
	`xa_is_v®ue
(entry))

1489 ià(
xas
.
xa_šdex
 == 0)

1493  
xas
.
xa_šdex
;

1494 
	}
}

1495 
EXPORT_SYMBOL
(
·ge_ÿche_Ãxt_miss
);

1516 
pgoff_t
 
	$·ge_ÿche_´ev_miss
(
add»ss_¥aû
 *
m­pšg
,

1517 
pgoff_t
 
šdex
, 
max_sÿn
)

1519 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
šdex
);

1521 
max_sÿn
--) {

1522 *
’Œy
 = 
	`xas_´ev
(&
xas
);

1523 ià(!
’Œy
 || 
	`xa_is_v®ue
(entry))

1525 ià(
xas
.
xa_šdex
 =ð
ULONG_MAX
)

1529  
xas
.
xa_šdex
;

1530 
	}
}

1531 
EXPORT_SYMBOL
(
·ge_ÿche_´ev_miss
);

1546 
·ge
 *
	$fšd_g‘_’Œy
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 
off£t
)

1548 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
off£t
);

1549 
·ge
 *page;

1551 
	`rcu_»ad_lock
();

1552 
»³©
:

1553 
	`xas_»£t
(&
xas
);

1554 
·ge
 = 
	`xas_lßd
(&
xas
);

1555 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

1556 
»³©
;

1561 ià(!
·ge
 || 
	`xa_is_v®ue
(page))

1562 
out
;

1564 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

1565 
»³©
;

1572 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
))) {

1573 
	`put_·ge
(
·ge
);

1574 
»³©
;

1576 
·ge
 = 
	`fšd_sub·ge
Õage, 
off£t
);

1577 
out
:

1578 
	`rcu_»ad_uÆock
();

1580  
·ge
;

1581 
	}
}

1582 
EXPORT_SYMBOL
(
fšd_g‘_’Œy
);

1600 
·ge
 *
	$fšd_lock_’Œy
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 
off£t
)

1602 
·ge
 *page;

1604 
»³©
:

1605 
·ge
 = 
	`fšd_g‘_’Œy
(
m­pšg
, 
off£t
);

1606 ià(
·ge
 && !
	`xa_is_v®ue
(page)) {

1607 
	`lock_·ge
(
·ge
);

1609 ià(
	`uÆik–y
(
	`·ge_m­pšg
(
·ge
è!ð
m­pšg
)) {

1610 
	`uÆock_·ge
(
·ge
);

1611 
	`put_·ge
(
·ge
);

1612 
»³©
;

1614 
	`VM_BUG_ON_PAGE
(
	`·ge_to_pgoff
(
·ge
è!ð
off£t
,…age);

1616  
·ge
;

1617 
	}
}

1618 
EXPORT_SYMBOL
(
fšd_lock_’Œy
);

1650 
·ge
 *
	$·geÿche_g‘_·ge
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 
off£t
,

1651 
fgp_æags
, 
gå_t
 
gå_mask
)

1653 
·ge
 *page;

1655 
»³©
:

1656 
·ge
 = 
	`fšd_g‘_’Œy
(
m­pšg
, 
off£t
);

1657 ià(
	`xa_is_v®ue
(
·ge
))

1658 
·ge
 = 
NULL
;

1659 ià(!
·ge
)

1660 
no_·ge
;

1662 ià(
fgp_æags
 & 
FGP_LOCK
) {

1663 ià(
fgp_æags
 & 
FGP_NOWAIT
) {

1664 ià(!
	`Œylock_·ge
(
·ge
)) {

1665 
	`put_·ge
(
·ge
);

1666  
NULL
;

1669 
	`lock_·ge
(
·ge
);

1673 ià(
	`uÆik–y
(
	`compound_h—d
(
·ge
)->
m­pšg
 != mapping)) {

1674 
	`uÆock_·ge
(
·ge
);

1675 
	`put_·ge
(
·ge
);

1676 
»³©
;

1678 
	`VM_BUG_ON_PAGE
(
·ge
->
šdex
 !ð
off£t
,…age);

1681 ià(
fgp_æags
 & 
FGP_ACCESSED
)

1682 
	`m¬k_·ge_acûs£d
(
·ge
);

1684 
no_·ge
:

1685 ià(!
·ge
 && (
fgp_æags
 & 
FGP_CREAT
)) {

1686 
”r
;

1687 ià((
fgp_æags
 & 
FGP_WRITE
è&& 
	`m­pšg_ÿp_accouÁ_dœty
(
m­pšg
))

1688 
gå_mask
 |ð
__GFP_WRITE
;

1689 ià(
fgp_æags
 & 
FGP_NOFS
)

1690 
gå_mask
 &ð~
__GFP_FS
;

1692 
·ge
 = 
	`__·ge_ÿche_®loc
(
gå_mask
);

1693 ià(!
·ge
)

1694  
NULL
;

1696 ià(
	`WARN_ON_ONCE
(!(
fgp_æags
 & (
FGP_LOCK
 | 
FGP_FOR_MMAP
))))

1697 
fgp_æags
 |ð
FGP_LOCK
;

1700 ià(
fgp_æags
 & 
FGP_ACCESSED
)

1701 
	`__S‘PageReã»nûd
(
·ge
);

1703 
”r
 = 
	`add_to_·ge_ÿche_Ìu
(
·ge
, 
m­pšg
, 
off£t
, 
gå_mask
);

1704 ià(
	`uÆik–y
(
”r
)) {

1705 
	`put_·ge
(
·ge
);

1706 
·ge
 = 
NULL
;

1707 ià(
”r
 =ð-
EEXIST
)

1708 
»³©
;

1715 ià(
·ge
 && (
fgp_æags
 & 
FGP_FOR_MMAP
))

1716 
	`uÆock_·ge
(
·ge
);

1719  
·ge
;

1720 
	}
}

1721 
EXPORT_SYMBOL
(
·geÿche_g‘_·ge
);

1745 
	$fšd_g‘_’Œ›s
(
add»ss_¥aû
 *
m­pšg
,

1746 
pgoff_t
 
¡¬t
, 
Ä_’Œ›s
,

1747 
·ge
 **
’Œ›s
, 
pgoff_t
 *
šdiûs
)

1749 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
¡¬t
);

1750 
·ge
 *page;

1751 
»t
 = 0;

1753 ià(!
Ä_’Œ›s
)

1756 
	`rcu_»ad_lock
();

1757 
	`xas_fÜ_—ch
(&
xas
, 
·ge
, 
ULONG_MAX
) {

1758 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

1765 ià(
	`xa_is_v®ue
(
·ge
))

1766 
expÜt
;

1768 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

1769 
»Œy
;

1772 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
)))

1773 
put_·ge
;

1774 
·ge
 = 
	`fšd_sub·ge
Õage, 
xas
.
xa_šdex
);

1776 
expÜt
:

1777 
šdiûs
[
»t
] = 
xas
.
xa_šdex
;

1778 
’Œ›s
[
»t
] = 
·ge
;

1779 ià(++
»t
 =ð
Ä_’Œ›s
)

1782 
put_·ge
:

1783 
	`put_·ge
(
·ge
);

1784 
»Œy
:

1785 
	`xas_»£t
(&
xas
);

1787 
	`rcu_»ad_uÆock
();

1788  
»t
;

1789 
	}
}

1812 
	$fšd_g‘_·ges_¿nge
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 *
¡¬t
,

1813 
pgoff_t
 
’d
, 
Ä_·ges
,

1814 
·ge
 **
·ges
)

1816 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, *
¡¬t
);

1817 
·ge
 *page;

1818 
»t
 = 0;

1820 ià(
	`uÆik–y
(!
Ä_·ges
))

1823 
	`rcu_»ad_lock
();

1824 
	`xas_fÜ_—ch
(&
xas
, 
·ge
, 
’d
) {

1825 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

1828 ià(
	`xa_is_v®ue
(
·ge
))

1831 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

1832 
»Œy
;

1835 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
)))

1836 
put_·ge
;

1838 
·ges
[
»t
] = 
	`fšd_sub·ge
(
·ge
, 
xas
.
xa_šdex
);

1839 ià(++
»t
 =ð
Ä_·ges
) {

1840 *
¡¬t
 = 
xas
.
xa_šdex
 + 1;

1841 
out
;

1844 
put_·ge
:

1845 
	`put_·ge
(
·ge
);

1846 
»Œy
:

1847 
	`xas_»£t
(&
xas
);

1856 ià(
’d
 =ð(
pgoff_t
)-1)

1857 *
¡¬t
 = (
pgoff_t
)-1;

1859 *
¡¬t
 = 
’d
 + 1;

1860 
out
:

1861 
	`rcu_»ad_uÆock
();

1863  
»t
;

1864 
	}
}

1878 
	$fšd_g‘_·ges_cÚtig
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 
šdex
,

1879 
Ä_·ges
, 
·ge
 **
·ges
)

1881 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
šdex
);

1882 
·ge
 *page;

1883 
»t
 = 0;

1885 ià(
	`uÆik–y
(!
Ä_·ges
))

1888 
	`rcu_»ad_lock
();

1889 
·ge
 = 
	`xas_lßd
(&
xas
);…age;…agð
	`xas_Ãxt
(&xas)) {

1890 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

1896 ià(
	`xa_is_v®ue
(
·ge
))

1899 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

1900 
»Œy
;

1903 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
)))

1904 
put_·ge
;

1906 
·ges
[
»t
] = 
	`fšd_sub·ge
(
·ge
, 
xas
.
xa_šdex
);

1907 ià(++
»t
 =ð
Ä_·ges
)

1910 
put_·ge
:

1911 
	`put_·ge
(
·ge
);

1912 
»Œy
:

1913 
	`xas_»£t
(&
xas
);

1915 
	`rcu_»ad_uÆock
();

1916  
»t
;

1917 
	}
}

1918 
EXPORT_SYMBOL
(
fšd_g‘_·ges_cÚtig
);

1934 
	$fšd_g‘_·ges_¿nge_g
(
add»ss_¥aû
 *
m­pšg
, 
pgoff_t
 *
šdex
,

1935 
pgoff_t
 
’d
, 
xa_m¬k_t
 
g
, 
Ä_·ges
,

1936 
·ge
 **
·ges
)

1938 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, *
šdex
);

1939 
·ge
 *page;

1940 
»t
 = 0;

1942 ià(
	`uÆik–y
(!
Ä_·ges
))

1945 
	`rcu_»ad_lock
();

1946 
	`xas_fÜ_—ch_m¬ked
(&
xas
, 
·ge
, 
’d
, 
g
) {

1947 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

1954 ià(
	`xa_is_v®ue
(
·ge
))

1957 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

1958 
»Œy
;

1961 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
)))

1962 
put_·ge
;

1964 
·ges
[
»t
] = 
	`fšd_sub·ge
(
·ge
, 
xas
.
xa_šdex
);

1965 ià(++
»t
 =ð
Ä_·ges
) {

1966 *
šdex
 = 
xas
.
xa_šdex
 + 1;

1967 
out
;

1970 
put_·ge
:

1971 
	`put_·ge
(
·ge
);

1972 
»Œy
:

1973 
	`xas_»£t
(&
xas
);

1982 ià(
’d
 =ð(
pgoff_t
)-1)

1983 *
šdex
 = (
pgoff_t
)-1;

1985 *
šdex
 = 
’d
 + 1;

1986 
out
:

1987 
	`rcu_»ad_uÆock
();

1989  
»t
;

1990 
	}
}

1991 
EXPORT_SYMBOL
(
fšd_g‘_·ges_¿nge_g
);

2008 
	$shršk_»adah—d_size_eio
(
fže
 *
fžp
,

2009 
fže_¿_¡©e
 *
¿
)

2011 
¿
->
¿_·ges
 /= 4;

2012 
	}
}

2030 
ssize_t
 
	$g’”ic_fže_bufã»d_»ad
(
kiocb
 *
iocb
,

2031 
iov_™”
 *
™”
, 
ssize_t
 
wr™‹n
)

2033 
fže
 *
fžp
 = 
iocb
->
ki_fžp
;

2034 
add»ss_¥aû
 *
m­pšg
 = 
fžp
->
f_m­pšg
;

2035 
šode
 *šodð
m­pšg
->
ho¡
;

2036 
fže_¿_¡©e
 *
¿
 = &
fžp
->
f_¿
;

2037 
loff_t
 *
µos
 = &
iocb
->
ki_pos
;

2038 
pgoff_t
 
šdex
;

2039 
pgoff_t
 
Ï¡_šdex
;

2040 
pgoff_t
 
´ev_šdex
;

2041 
off£t
;

2042 
´ev_off£t
;

2043 
”rÜ
 = 0;

2045 ià(
	`uÆik–y
(*
µos
 >ð
šode
->
i_sb
->
s_maxby‹s
))

2047 
	`iov_™”_Œunÿ‹
(
™”
, 
šode
->
i_sb
->
s_maxby‹s
);

2049 
šdex
 = *
µos
 >> 
PAGE_SHIFT
;

2050 
´ev_šdex
 = 
¿
->
´ev_pos
 >> 
PAGE_SHIFT
;

2051 
´ev_off£t
 = 
¿
->
´ev_pos
 & (
PAGE_SIZE
-1);

2052 
Ï¡_šdex
 = (*
µos
 + 
™”
->
couÁ
 + 
PAGE_SIZE
-1è>> 
PAGE_SHIFT
;

2053 
off£t
 = *
µos
 & ~
PAGE_MASK
;

2056 
·ge
 *page;

2057 
pgoff_t
 
’d_šdex
;

2058 
loff_t
 
isize
;

2059 
Ä
, 
»t
;

2061 
	`cÚd_»sched
();

2062 
fšd_·ge
:

2063 ià(
	`çl_sigÇl_³ndšg
(
cu¼’t
)) {

2064 
”rÜ
 = -
EINTR
;

2065 
out
;

2068 
·ge
 = 
	`fšd_g‘_·ge
(
m­pšg
, 
šdex
);

2069 ià(!
·ge
) {

2070 ià(
iocb
->
ki_æags
 & 
IOCB_NOWAIT
)

2071 
would_block
;

2072 
	`·ge_ÿche_sync_»adah—d
(
m­pšg
,

2073 
¿
, 
fžp
,

2074 
šdex
, 
Ï¡_šdex
 - index);

2075 
·ge
 = 
	`fšd_g‘_·ge
(
m­pšg
, 
šdex
);

2076 ià(
	`uÆik–y
(
·ge
 =ð
NULL
))

2077 
no_ÿched_·ge
;

2079 ià(
	`PageR—dah—d
(
·ge
)) {

2080 
	`·ge_ÿche_async_»adah—d
(
m­pšg
,

2081 
¿
, 
fžp
, 
·ge
,

2082 
šdex
, 
Ï¡_šdex
 - index);

2084 ià(!
	`PageU±od©e
(
·ge
)) {

2085 ià(
iocb
->
ki_æags
 & 
IOCB_NOWAIT
) {

2086 
	`put_·ge
(
·ge
);

2087 
would_block
;

2095 
”rÜ
 = 
	`wa™_Ú_·ge_locked_kžÏbË
(
·ge
);

2096 ià(
	`uÆik–y
(
”rÜ
))

2097 
»ad·ge_”rÜ
;

2098 ià(
	`PageU±od©e
(
·ge
))

2099 
·ge_ok
;

2101 ià(
šode
->
i_blkb™s
 =ð
PAGE_SHIFT
 ||

2102 !
m­pšg
->
a_Ýs
->
is_·¹ŸÎy_u±od©e
)

2103 
·ge_nÙ_up_to_d©e
;

2105 ià(
	`uÆik–y
(
	`iov_™”_is_pe
(
™”
)))

2106 
·ge_nÙ_up_to_d©e
;

2107 ià(!
	`Œylock_·ge
(
·ge
))

2108 
·ge_nÙ_up_to_d©e
;

2110 ià(!
·ge
->
m­pšg
)

2111 
·ge_nÙ_up_to_d©e_locked
;

2112 ià(!
m­pšg
->
a_Ýs
->
	`is_·¹ŸÎy_u±od©e
(
·ge
,

2113 
off£t
, 
™”
->
couÁ
))

2114 
·ge_nÙ_up_to_d©e_locked
;

2115 
	`uÆock_·ge
(
·ge
);

2117 
·ge_ok
:

2127 
isize
 = 
	`i_size_»ad
(
šode
);

2128 
’d_šdex
 = (
isize
 - 1è>> 
PAGE_SHIFT
;

2129 ià(
	`uÆik–y
(!
isize
 || 
šdex
 > 
’d_šdex
)) {

2130 
	`put_·ge
(
·ge
);

2131 
out
;

2135 
Ä
 = 
PAGE_SIZE
;

2136 ià(
šdex
 =ð
’d_šdex
) {

2137 
Ä
 = ((
isize
 - 1è& ~
PAGE_MASK
) + 1;

2138 ià(
Ä
 <ð
off£t
) {

2139 
	`put_·ge
(
·ge
);

2140 
out
;

2143 
Ä
 =‚¸- 
off£t
;

2149 ià(
	`m­pšg_wr™ably_m­³d
(
m­pšg
))

2150 
	`æush_dÿche_·ge
(
·ge
);

2156 ià(
´ev_šdex
 !ð
šdex
 || 
off£t
 !ð
´ev_off£t
)

2157 
	`m¬k_·ge_acûs£d
(
·ge
);

2158 
´ev_šdex
 = 
šdex
;

2165 
»t
 = 
	`cÝy_·ge_to_™”
(
·ge
, 
off£t
, 
Ä
, 
™”
);

2166 
off£t
 +ð
»t
;

2167 
šdex
 +ð
off£t
 >> 
PAGE_SHIFT
;

2168 
off£t
 &ð~
PAGE_MASK
;

2169 
´ev_off£t
 = 
off£t
;

2171 
	`put_·ge
(
·ge
);

2172 
wr™‹n
 +ð
»t
;

2173 ià(!
	`iov_™”_couÁ
(
™”
))

2174 
out
;

2175 ià(
»t
 < 
Ä
) {

2176 
”rÜ
 = -
EFAULT
;

2177 
out
;

2181 
·ge_nÙ_up_to_d©e
:

2183 
”rÜ
 = 
	`lock_·ge_kžÏbË
(
·ge
);

2184 ià(
	`uÆik–y
(
”rÜ
))

2185 
»ad·ge_”rÜ
;

2187 
·ge_nÙ_up_to_d©e_locked
:

2189 ià(!
·ge
->
m­pšg
) {

2190 
	`uÆock_·ge
(
·ge
);

2191 
	`put_·ge
(
·ge
);

2196 ià(
	`PageU±od©e
(
·ge
)) {

2197 
	`uÆock_·ge
(
·ge
);

2198 
·ge_ok
;

2201 
»ad·ge
:

2207 
	`CË¬PageE¼Ü
(
·ge
);

2209 
”rÜ
 = 
m­pšg
->
a_Ýs
->
	`»ad·ge
(
fžp
, 
·ge
);

2211 ià(
	`uÆik–y
(
”rÜ
)) {

2212 ià(
”rÜ
 =ð
AOP_TRUNCATED_PAGE
) {

2213 
	`put_·ge
(
·ge
);

2214 
”rÜ
 = 0;

2215 
fšd_·ge
;

2217 
»ad·ge_”rÜ
;

2220 ià(!
	`PageU±od©e
(
·ge
)) {

2221 
”rÜ
 = 
	`lock_·ge_kžÏbË
(
·ge
);

2222 ià(
	`uÆik–y
(
”rÜ
))

2223 
»ad·ge_”rÜ
;

2224 ià(!
	`PageU±od©e
(
·ge
)) {

2225 ià(
·ge
->
m­pšg
 =ð
NULL
) {

2229 
	`uÆock_·ge
(
·ge
);

2230 
	`put_·ge
(
·ge
);

2231 
fšd_·ge
;

2233 
	`uÆock_·ge
(
·ge
);

2234 
	`shršk_»adah—d_size_eio
(
fžp
, 
¿
);

2235 
”rÜ
 = -
EIO
;

2236 
»ad·ge_”rÜ
;

2238 
	`uÆock_·ge
(
·ge
);

2241 
·ge_ok
;

2243 
»ad·ge_”rÜ
:

2245 
	`put_·ge
(
·ge
);

2246 
out
;

2248 
no_ÿched_·ge
:

2253 
·ge
 = 
	`·ge_ÿche_®loc
(
m­pšg
);

2254 ià(!
·ge
) {

2255 
”rÜ
 = -
ENOMEM
;

2256 
out
;

2258 
”rÜ
 = 
	`add_to_·ge_ÿche_Ìu
(
·ge
, 
m­pšg
, 
šdex
,

2259 
	`m­pšg_gå_cÚ¡¿št
(
m­pšg
, 
GFP_KERNEL
));

2260 ià(
”rÜ
) {

2261 
	`put_·ge
(
·ge
);

2262 ià(
”rÜ
 =ð-
EEXIST
) {

2263 
”rÜ
 = 0;

2264 
fšd_·ge
;

2266 
out
;

2268 
»ad·ge
;

2271 
would_block
:

2272 
”rÜ
 = -
EAGAIN
;

2273 
out
:

2274 
¿
->
´ev_pos
 = 
´ev_šdex
;

2275 
¿
->
´ev_pos
 <<ð
PAGE_SHIFT
;

2276 
¿
->
´ev_pos
 |ð
´ev_off£t
;

2278 *
µos
 = ((
loff_t
)
šdex
 << 
PAGE_SHIFT
è+ 
off£t
;

2279 
	`fže_acûs£d
(
fžp
);

2280  
wr™‹n
 ? wr™‹À: 
”rÜ
;

2281 
	}
}

2294 
ssize_t


2295 
	$g’”ic_fže_»ad_™”
(
kiocb
 *
iocb
, 
iov_™”
 *
™”
)

2297 
size_t
 
couÁ
 = 
	`iov_™”_couÁ
(
™”
);

2298 
ssize_t
 
»tv®
 = 0;

2300 ià(!
couÁ
)

2301 
out
;

2303 ià(
iocb
->
ki_æags
 & 
IOCB_DIRECT
) {

2304 
fže
 *fžð
iocb
->
ki_fžp
;

2305 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2306 
šode
 *šodð
m­pšg
->
ho¡
;

2307 
loff_t
 
size
;

2309 
size
 = 
	`i_size_»ad
(
šode
);

2310 ià(
iocb
->
ki_æags
 & 
IOCB_NOWAIT
) {

2311 ià(
	`fžem­_¿nge_has_·ge
(
m­pšg
, 
iocb
->
ki_pos
,

2312 
iocb
->
ki_pos
 + 
couÁ
 - 1))

2313  -
EAGAIN
;

2315 
»tv®
 = 
	`fžem­_wr™e_ªd_wa™_¿nge
(
m­pšg
,

2316 
iocb
->
ki_pos
,

2317 
iocb
->
ki_pos
 + 
couÁ
 - 1);

2318 ià(
»tv®
 < 0)

2319 
out
;

2322 
	`fže_acûs£d
(
fže
);

2324 
»tv®
 = 
m­pšg
->
a_Ýs
->
	`dœeù_IO
(
iocb
, 
™”
);

2325 ià(
»tv®
 >= 0) {

2326 
iocb
->
ki_pos
 +ð
»tv®
;

2327 
couÁ
 -ð
»tv®
;

2329 
	`iov_™”_»v”t
(
™”
, 
couÁ
 - 
	`iov_™”_couÁ
(iter));

2340 ià(
»tv®
 < 0 || !
couÁ
 || 
iocb
->
ki_pos
 >ð
size
 ||

2341 
	`IS_DAX
(
šode
))

2342 
out
;

2345 
»tv®
 = 
	`g’”ic_fže_bufã»d_»ad
(
iocb
, 
™”
,„etval);

2346 
out
:

2347  
»tv®
;

2348 
	}
}

2349 
EXPORT_SYMBOL
(
g’”ic_fže_»ad_™”
);

2351 #ifdeà
CONFIG_MMU


2352 
	#MMAP_LOTSAMISS
 (100)

	)

2364 
	$lock_·ge_maybe_drÝ_mm­
(
vm_çuÉ
 *
vmf
, 
·ge
 *page,

2365 
fže
 **
åš
)

2367 ià(
	`Œylock_·ge
(
·ge
))

2375 ià(
vmf
->
æags
 & 
FAULT_FLAG_RETRY_NOWAIT
)

2378 *
åš
 = 
	`maybe_uÆock_mm­_fÜ_io
(
vmf
, *fpin);

2379 ià(
vmf
->
æags
 & 
FAULT_FLAG_KILLABLE
) {

2380 ià(
	`__lock_·ge_kžÏbË
(
·ge
)) {

2387 ià(*
åš
 =ð
NULL
)

2388 
	`up_»ad
(&
vmf
->
vma
->
vm_mm
->
mm­_£m
);

2392 
	`__lock_·ge
(
·ge
);

2394 
	}
}

2404 
fže
 *
	$do_sync_mm­_»adah—d
(
vm_çuÉ
 *
vmf
)

2406 
fže
 *fžð
vmf
->
vma
->
vm_fže
;

2407 
fže_¿_¡©e
 *
¿
 = &
fže
->
f_¿
;

2408 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2409 
fže
 *
åš
 = 
NULL
;

2410 
pgoff_t
 
off£t
 = 
vmf
->
pgoff
;

2413 ià(
vmf
->
vma
->
vm_æags
 & 
VM_RAND_READ
)

2414  
åš
;

2415 ià(!
¿
->
¿_·ges
)

2416  
åš
;

2418 ià(
vmf
->
vma
->
vm_æags
 & 
VM_SEQ_READ
) {

2419 
åš
 = 
	`maybe_uÆock_mm­_fÜ_io
(
vmf
, fpin);

2420 
	`·ge_ÿche_sync_»adah—d
(
m­pšg
, 
¿
, 
fže
, 
off£t
,

2421 
¿
->
¿_·ges
);

2422  
åš
;

2426 ià(
¿
->
mm­_miss
 < 
MMAP_LOTSAMISS
 * 10)

2427 
¿
->
mm­_miss
++;

2433 ià(
¿
->
mm­_miss
 > 
MMAP_LOTSAMISS
)

2434  
åš
;

2439 
åš
 = 
	`maybe_uÆock_mm­_fÜ_io
(
vmf
, fpin);

2440 
¿
->
¡¬t
 = 
	`max_t
(, 0, 
off£t
 -„a->
¿_·ges
 / 2);

2441 
¿
->
size
 =„a->
¿_·ges
;

2442 
¿
->
async_size
 =„a->
¿_·ges
 / 4;

2443 
	`¿_subm™
(
¿
, 
m­pšg
, 
fže
);

2444  
åš
;

2445 
	}
}

2452 
fže
 *
	$do_async_mm­_»adah—d
(
vm_çuÉ
 *
vmf
,

2453 
·ge
 *page)

2455 
fže
 *fžð
vmf
->
vma
->
vm_fže
;

2456 
fže_¿_¡©e
 *
¿
 = &
fže
->
f_¿
;

2457 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2458 
fže
 *
åš
 = 
NULL
;

2459 
pgoff_t
 
off£t
 = 
vmf
->
pgoff
;

2462 ià(
vmf
->
vma
->
vm_æags
 & 
VM_RAND_READ
 || !
¿
->
¿_·ges
)

2463  
åš
;

2464 ià(
¿
->
mm­_miss
 > 0)

2465 
¿
->
mm­_miss
--;

2466 ià(
	`PageR—dah—d
(
·ge
)) {

2467 
åš
 = 
	`maybe_uÆock_mm­_fÜ_io
(
vmf
, fpin);

2468 
	`·ge_ÿche_async_»adah—d
(
m­pšg
, 
¿
, 
fže
,

2469 
·ge
, 
off£t
, 
¿
->
¿_·ges
);

2471  
åš
;

2472 
	}
}

2497 
vm_çuÉ_t
 
	$fžem­_çuÉ
(
vm_çuÉ
 *
vmf
)

2499 
”rÜ
;

2500 
fže
 *fžð
vmf
->
vma
->
vm_fže
;

2501 
fže
 *
åš
 = 
NULL
;

2502 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2503 
fže_¿_¡©e
 *
¿
 = &
fže
->
f_¿
;

2504 
šode
 *šodð
m­pšg
->
ho¡
;

2505 
pgoff_t
 
off£t
 = 
vmf
->
pgoff
;

2506 
pgoff_t
 
max_off
;

2507 
·ge
 *page;

2508 
vm_çuÉ_t
 
»t
 = 0;

2510 
max_off
 = 
	`DIV_ROUND_UP
(
	`i_size_»ad
(
šode
), 
PAGE_SIZE
);

2511 ià(
	`uÆik–y
(
off£t
 >ð
max_off
))

2512  
VM_FAULT_SIGBUS
;

2517 
·ge
 = 
	`fšd_g‘_·ge
(
m­pšg
, 
off£t
);

2518 ià(
	`lik–y
(
·ge
è&& !(
vmf
->
æags
 & 
FAULT_FLAG_TRIED
)) {

2523 
åš
 = 
	`do_async_mm­_»adah—d
(
vmf
, 
·ge
);

2524 } ià(!
·ge
) {

2526 
	`couÁ_vm_ev’t
(
PGMAJFAULT
);

2527 
	`couÁ_memcg_ev’t_mm
(
vmf
->
vma
->
vm_mm
, 
PGMAJFAULT
);

2528 
»t
 = 
VM_FAULT_MAJOR
;

2529 
åš
 = 
	`do_sync_mm­_»adah—d
(
vmf
);

2530 
»Œy_fšd
:

2531 
·ge
 = 
	`·geÿche_g‘_·ge
(
m­pšg
, 
off£t
,

2532 
FGP_CREAT
|
FGP_FOR_MMAP
,

2533 
vmf
->
gå_mask
);

2534 ià(!
·ge
) {

2535 ià(
åš
)

2536 
out_»Œy
;

2537  
	`vmf_”rÜ
(-
ENOMEM
);

2541 ià(!
	`lock_·ge_maybe_drÝ_mm­
(
vmf
, 
·ge
, &
åš
))

2542 
out_»Œy
;

2545 ià(
	`uÆik–y
(
	`compound_h—d
(
·ge
)->
m­pšg
 != mapping)) {

2546 
	`uÆock_·ge
(
·ge
);

2547 
	`put_·ge
(
·ge
);

2548 
»Œy_fšd
;

2550 
	`VM_BUG_ON_PAGE
(
	`·ge_to_pgoff
(
·ge
è!ð
off£t
,…age);

2556 ià(
	`uÆik–y
(!
	`PageU±od©e
(
·ge
)))

2557 
·ge_nÙ_u±od©e
;

2564 ià(
åš
) {

2565 
	`uÆock_·ge
(
·ge
);

2566 
out_»Œy
;

2573 
max_off
 = 
	`DIV_ROUND_UP
(
	`i_size_»ad
(
šode
), 
PAGE_SIZE
);

2574 ià(
	`uÆik–y
(
off£t
 >ð
max_off
)) {

2575 
	`uÆock_·ge
(
·ge
);

2576 
	`put_·ge
(
·ge
);

2577  
VM_FAULT_SIGBUS
;

2580 
vmf
->
·ge
 =…age;

2581  
»t
 | 
VM_FAULT_LOCKED
;

2583 
·ge_nÙ_u±od©e
:

2590 
	`CË¬PageE¼Ü
(
·ge
);

2591 
åš
 = 
	`maybe_uÆock_mm­_fÜ_io
(
vmf
, fpin);

2592 
”rÜ
 = 
m­pšg
->
a_Ýs
->
	`»ad·ge
(
fže
, 
·ge
);

2593 ià(!
”rÜ
) {

2594 
	`wa™_Ú_·ge_locked
(
·ge
);

2595 ià(!
	`PageU±od©e
(
·ge
))

2596 
”rÜ
 = -
EIO
;

2598 ià(
åš
)

2599 
out_»Œy
;

2600 
	`put_·ge
(
·ge
);

2602 ià(!
”rÜ
 ||ƒ¼Ü =ð
AOP_TRUNCATED_PAGE
)

2603 
»Œy_fšd
;

2606 
	`shršk_»adah—d_size_eio
(
fže
, 
¿
);

2607  
VM_FAULT_SIGBUS
;

2609 
out_»Œy
:

2615 ià(
·ge
)

2616 
	`put_·ge
(
·ge
);

2617 ià(
åš
)

2618 
	`åut
(
åš
);

2619  
»t
 | 
VM_FAULT_RETRY
;

2620 
	}
}

2621 
EXPORT_SYMBOL
(
fžem­_çuÉ
);

2623 
	$fžem­_m­_·ges
(
vm_çuÉ
 *
vmf
,

2624 
pgoff_t
 
¡¬t_pgoff
,…goff_ˆ
’d_pgoff
)

2626 
fže
 *fžð
vmf
->
vma
->
vm_fže
;

2627 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2628 
pgoff_t
 
Ï¡_pgoff
 = 
¡¬t_pgoff
;

2629 
max_idx
;

2630 
	`XA_STATE
(
xas
, &
m­pšg
->
i_·ges
, 
¡¬t_pgoff
);

2631 
·ge
 *page;

2633 
	`rcu_»ad_lock
();

2634 
	`xas_fÜ_—ch
(&
xas
, 
·ge
, 
’d_pgoff
) {

2635 ià(
	`xas_»Œy
(&
xas
, 
·ge
))

2637 ià(
	`xa_is_v®ue
(
·ge
))

2638 
Ãxt
;

2644 ià(
	`PageLocked
(
·ge
))

2645 
Ãxt
;

2646 ià(!
	`·ge_ÿche_g‘_¥ecuÏtive
(
·ge
))

2647 
Ãxt
;

2650 ià(
	`uÆik–y
(
·ge
 !ð
	`xas_»lßd
(&
xas
)))

2651 
sk
;

2652 
·ge
 = 
	`fšd_sub·ge
Õage, 
xas
.
xa_šdex
);

2654 ià(!
	`PageU±od©e
(
·ge
) ||

2655 
	`PageR—dah—d
(
·ge
) ||

2656 
	`PageHWPoisÚ
(
·ge
))

2657 
sk
;

2658 ià(!
	`Œylock_·ge
(
·ge
))

2659 
sk
;

2661 ià(
·ge
->
m­pšg
 !ðm­pšg || !
	`PageU±od©e
(page))

2662 
uÆock
;

2664 
max_idx
 = 
	`DIV_ROUND_UP
(
	`i_size_»ad
(
m­pšg
->
ho¡
), 
PAGE_SIZE
);

2665 ià(
·ge
->
šdex
 >ð
max_idx
)

2666 
uÆock
;

2668 ià(
fže
->
f_¿
.
mm­_miss
 > 0)

2669 
fže
->
f_¿
.
mm­_miss
--;

2671 
vmf
->
add»ss
 +ð(
xas
.
xa_šdex
 - 
Ï¡_pgoff
è<< 
PAGE_SHIFT
;

2672 ià(
vmf
->
±e
)

2673 
vmf
->
±e
 +ð
xas
.
xa_šdex
 - 
Ï¡_pgoff
;

2674 
Ï¡_pgoff
 = 
xas
.
xa_šdex
;

2675 ià(
	`®loc_£t_±e
(
vmf
, 
NULL
, 
·ge
))

2676 
uÆock
;

2677 
	`uÆock_·ge
(
·ge
);

2678 
Ãxt
;

2679 
uÆock
:

2680 
	`uÆock_·ge
(
·ge
);

2681 
sk
:

2682 
	`put_·ge
(
·ge
);

2683 
Ãxt
:

2685 ià(
	`pmd_Œªs_huge
(*
vmf
->
pmd
))

2688 
	`rcu_»ad_uÆock
();

2689 
	}
}

2690 
EXPORT_SYMBOL
(
fžem­_m­_·ges
);

2692 
vm_çuÉ_t
 
	$fžem­_·ge_mkwr™e
(
vm_çuÉ
 *
vmf
)

2694 
·ge
 *·gð
vmf
->page;

2695 
šode
 *šodð
	`fže_šode
(
vmf
->
vma
->
vm_fže
);

2696 
vm_çuÉ_t
 
»t
 = 
VM_FAULT_LOCKED
;

2698 
	`sb_¡¬t_·geçuÉ
(
šode
->
i_sb
);

2699 
	`fže_upd©e_time
(
vmf
->
vma
->
vm_fže
);

2700 
	`lock_·ge
(
·ge
);

2701 ià(
·ge
->
m­pšg
 !ð
šode
->
i_m­pšg
) {

2702 
	`uÆock_·ge
(
·ge
);

2703 
»t
 = 
VM_FAULT_NOPAGE
;

2704 
out
;

2711 
	`£t_·ge_dœty
(
·ge
);

2712 
	`wa™_fÜ_¡abË_·ge
(
·ge
);

2713 
out
:

2714 
	`sb_’d_·geçuÉ
(
šode
->
i_sb
);

2715  
»t
;

2716 
	}
}

2718 cÚ¡ 
vm_Ý”©iÚs_¡ruù
 
	gg’”ic_fže_vm_Ýs
 = {

2719 .
çuÉ
 = 
fžem­_çuÉ
,

2720 .
	gm­_·ges
 = 
fžem­_m­_·ges
,

2721 .
	g·ge_mkwr™e
 = 
fžem­_·ge_mkwr™e
,

2726 
	$g’”ic_fže_mm­
(
fže
 * fže, 
vm_¬—_¡ruù
 * 
vma
)

2728 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

2730 ià(!
m­pšg
->
a_Ýs
->
»ad·ge
)

2731  -
ENOEXEC
;

2732 
	`fže_acûs£d
(
fže
);

2733 
vma
->
vm_Ýs
 = &
g’”ic_fže_vm_Ýs
;

2735 
	}
}

2740 
	$g’”ic_fže_»adÚly_mm­
(
fže
 *fže, 
vm_¬—_¡ruù
 *
vma
)

2742 ià((
vma
->
vm_æags
 & 
VM_SHARED
è&& (vma->vm_æag & 
VM_MAYWRITE
))

2743  -
EINVAL
;

2744  
	`g’”ic_fže_mm­
(
fže
, 
vma
);

2745 
	}
}

2747 
vm_çuÉ_t
 
	$fžem­_·ge_mkwr™e
(
vm_çuÉ
 *
vmf
)

2749  
VM_FAULT_SIGBUS
;

2750 
	}
}

2751 
	$g’”ic_fže_mm­
(
fže
 * fže, 
vm_¬—_¡ruù
 * 
vma
)

2753  -
ENOSYS
;

2754 
	}
}

2755 
	$g’”ic_fže_»adÚly_mm­
(
fže
 * fže, 
vm_¬—_¡ruù
 * 
vma
)

2757  -
ENOSYS
;

2758 
	}
}

2761 
EXPORT_SYMBOL
(
fžem­_·ge_mkwr™e
);

2762 
EXPORT_SYMBOL
(
g’”ic_fže_mm­
);

2763 
EXPORT_SYMBOL
(
g’”ic_fže_»adÚly_mm­
);

2765 
·ge
 *
	$wa™_Ú_·ge_»ad
(
·ge
 *page)

2767 ià(!
	`IS_ERR
(
·ge
)) {

2768 
	`wa™_Ú_·ge_locked
(
·ge
);

2769 ià(!
	`PageU±od©e
(
·ge
)) {

2770 
	`put_·ge
(
·ge
);

2771 
·ge
 = 
	`ERR_PTR
(-
EIO
);

2774  
·ge
;

2775 
	}
}

2777 
·ge
 *
	$do_»ad_ÿche_·ge
(
add»ss_¥aû
 *
m­pšg
,

2778 
pgoff_t
 
šdex
,

2779 (*
fžËr
)(*, 
·ge
 *),

2780 *
d©a
,

2781 
gå_t
 
gå
)

2783 
·ge
 *page;

2784 
”r
;

2785 
»³©
:

2786 
·ge
 = 
	`fšd_g‘_·ge
(
m­pšg
, 
šdex
);

2787 ià(!
·ge
) {

2788 
·ge
 = 
	`__·ge_ÿche_®loc
(
gå
);

2789 ià(!
·ge
)

2790  
	`ERR_PTR
(-
ENOMEM
);

2791 
”r
 = 
	`add_to_·ge_ÿche_Ìu
(
·ge
, 
m­pšg
, 
šdex
, 
gå
);

2792 ià(
	`uÆik–y
(
”r
)) {

2793 
	`put_·ge
(
·ge
);

2794 ià(
”r
 =ð-
EEXIST
)

2795 
»³©
;

2797  
	`ERR_PTR
(
”r
);

2800 
fžËr
:

2801 ià(
fžËr
)

2802 
”r
 = 
	`fžËr
(
d©a
, 
·ge
);

2804 
”r
 = 
m­pšg
->
a_Ýs
->
	`»ad·ge
(
d©a
, 
·ge
);

2806 ià(
”r
 < 0) {

2807 
	`put_·ge
(
·ge
);

2808  
	`ERR_PTR
(
”r
);

2811 
·ge
 = 
	`wa™_Ú_·ge_»ad
(page);

2812 ià(
	`IS_ERR
(
·ge
))

2813  
·ge
;

2814 
out
;

2816 ià(
	`PageU±od©e
(
·ge
))

2817 
out
;

2850 
	`wa™_Ú_·ge_locked
(
·ge
);

2851 ià(
	`PageU±od©e
(
·ge
))

2852 
out
;

2855 
	`lock_·ge
(
·ge
);

2858 ià(!
·ge
->
m­pšg
) {

2859 
	`uÆock_·ge
(
·ge
);

2860 
	`put_·ge
(
·ge
);

2861 
»³©
;

2865 ià(
	`PageU±od©e
(
·ge
)) {

2866 
	`uÆock_·ge
(
·ge
);

2867 
out
;

2876 
	`CË¬PageE¼Ü
(
·ge
);

2877 
fžËr
;

2879 
out
:

2880 
	`m¬k_·ge_acûs£d
(
·ge
);

2881  
·ge
;

2882 
	}
}

2898 
·ge
 *
	$»ad_ÿche_·ge
(
add»ss_¥aû
 *
m­pšg
,

2899 
pgoff_t
 
šdex
,

2900 (*
fžËr
)(*, 
·ge
 *),

2901 *
d©a
)

2903  
	`do_»ad_ÿche_·ge
(
m­pšg
, 
šdex
, 
fžËr
, 
d©a
,

2904 
	`m­pšg_gå_mask
(
m­pšg
));

2905 
	}
}

2906 
EXPORT_SYMBOL
(
»ad_ÿche_·ge
);

2921 
·ge
 *
	$»ad_ÿche_·ge_gå
(
add»ss_¥aû
 *
m­pšg
,

2922 
pgoff_t
 
šdex
,

2923 
gå_t
 
gå
)

2925  
	`do_»ad_ÿche_·ge
(
m­pšg
, 
šdex
, 
NULL
, NULL, 
gå
);

2926 
	}
}

2927 
EXPORT_SYMBOL
(
»ad_ÿche_·ge_gå
);

2934 
	$g’”ic_wr™e_check_lim™s
(
fže
 *fže, 
loff_t
 
pos
,

2935 
loff_t
 *
couÁ
)

2937 
šode
 *šodð
fže
->
f_m­pšg
->
ho¡
;

2938 
loff_t
 
max_size
 = 
šode
->
i_sb
->
s_maxby‹s
;

2939 
loff_t
 
lim™
 = 
	`¾im™
(
RLIMIT_FSIZE
);

2941 ià(
lim™
 !ð
RLIM_INFINITY
) {

2942 ià(
pos
 >ð
lim™
) {

2943 
	`£nd_sig
(
SIGXFSZ
, 
cu¼’t
, 0);

2944  -
EFBIG
;

2946 *
couÁ
 = 
	`mš
(*couÁ, 
lim™
 - 
pos
);

2949 ià(!(
fže
->
f_æags
 & 
O_LARGEFILE
))

2950 
max_size
 = 
MAX_NON_LFS
;

2952 ià(
	`uÆik–y
(
pos
 >ð
max_size
))

2953  -
EFBIG
;

2955 *
couÁ
 = 
	`mš
(*couÁ, 
max_size
 - 
pos
);

2958 
	}
}

2967 
šlše
 
ssize_t
 
	$g’”ic_wr™e_checks
(
kiocb
 *
iocb
, 
iov_™”
 *
äom
)

2969 
fže
 *fžð
iocb
->
ki_fžp
;

2970 
šode
 *šodð
fže
->
f_m­pšg
->
ho¡
;

2971 
loff_t
 
couÁ
;

2972 
»t
;

2974 ià(
	`IS_SWAPFILE
(
šode
))

2975  -
ETXTBSY
;

2977 ià(!
	`iov_™”_couÁ
(
äom
))

2981 ià(
iocb
->
ki_æags
 & 
IOCB_APPEND
)

2982 
iocb
->
ki_pos
 = 
	`i_size_»ad
(
šode
);

2984 ià((
iocb
->
ki_æags
 & 
IOCB_NOWAIT
è&& !(iocb->ki_æag & 
IOCB_DIRECT
))

2985  -
EINVAL
;

2987 
couÁ
 = 
	`iov_™”_couÁ
(
äom
);

2988 
»t
 = 
	`g’”ic_wr™e_check_lim™s
(
fže
, 
iocb
->
ki_pos
, &
couÁ
);

2989 ià(
»t
)

2990  
»t
;

2992 
	`iov_™”_Œunÿ‹
(
äom
, 
couÁ
);

2993  
	`iov_™”_couÁ
(
äom
);

2994 
	}
}

2995 
EXPORT_SYMBOL
(
g’”ic_wr™e_checks
);

3004 
	$g’”ic_»m­_checks
(
fže
 *
fže_š
, 
loff_t
 
pos_š
,

3005 
fže
 *
fže_out
, 
loff_t
 
pos_out
,

3006 
loff_t
 *
»q_couÁ
, 
»m­_æags
)

3008 
šode
 *
šode_š
 = 
fže_š
->
f_m­pšg
->
ho¡
;

3009 
šode
 *
šode_out
 = 
fže_out
->
f_m­pšg
->
ho¡
;

3010 
ušt64_t
 
couÁ
 = *
»q_couÁ
;

3011 
ušt64_t
 
bcouÁ
;

3012 
loff_t
 
size_š
, 
size_out
;

3013 
loff_t
 
bs
 = 
šode_out
->
i_sb
->
s_blocksize
;

3014 
»t
;

3017 ià(!
	`IS_ALIGNED
(
pos_š
, 
bs
è|| !IS_ALIGNED(
pos_out
, bs))

3018  -
EINVAL
;

3021 ià(
pos_š
 + 
couÁ
 <…os_š || 
pos_out
 + count <…os_out)

3022  -
EINVAL
;

3024 
size_š
 = 
	`i_size_»ad
(
šode_š
);

3025 
size_out
 = 
	`i_size_»ad
(
šode_out
);

3028 ià((
»m­_æags
 & 
REMAP_FILE_DEDUP
) &&

3029 (
pos_š
 >ð
size_š
 ||…os_š + 
couÁ
 > size_in ||

3030 
pos_out
 >ð
size_out
 ||…os_ouˆ+ 
couÁ
 > size_out))

3031  -
EINVAL
;

3034 ià(
pos_š
 >ð
size_š
)

3035  -
EINVAL
;

3036 
couÁ
 = 
	`mš
(couÁ, 
size_š
 - (
ušt64_t
)
pos_š
);

3038 
»t
 = 
	`g’”ic_wr™e_check_lim™s
(
fže_out
, 
pos_out
, &
couÁ
);

3039 ià(
»t
)

3040  
»t
;

3049 ià(
pos_š
 + 
couÁ
 =ð
size_š
) {

3050 
bcouÁ
 = 
	`ALIGN
(
size_š
, 
bs
è- 
pos_š
;

3052 ià(!
	`IS_ALIGNED
(
couÁ
, 
bs
))

3053 
couÁ
 = 
	`ALIGN_DOWN
(couÁ, 
bs
);

3054 
bcouÁ
 = 
couÁ
;

3058 ià(
šode_š
 =ð
šode_out
 &&

3059 
pos_out
 + 
bcouÁ
 > 
pos_š
 &&

3060 
pos_out
 < 
pos_š
 + 
bcouÁ
)

3061  -
EINVAL
;

3067 ià(*
»q_couÁ
 !ð
couÁ
 && !(
»m­_æags
 & 
REMAP_FILE_CAN_SHORTEN
))

3068  -
EINVAL
;

3070 *
»q_couÁ
 = 
couÁ
;

3072 
	}
}

3079 
	$g’”ic_fže_rw_checks
(
fže
 *
fže_š
, fž*
fže_out
)

3081 
šode
 *
šode_š
 = 
	`fže_šode
(
fže_š
);

3082 
šode
 *
šode_out
 = 
	`fže_šode
(
fže_out
);

3085 ià(
	`S_ISDIR
(
šode_š
->
i_mode
è|| S_ISDIR(
šode_out
->i_mode))

3086  -
EISDIR
;

3087 ià(!
	`S_ISREG
(
šode_š
->
i_mode
è|| !S_ISREG(
šode_out
->i_mode))

3088  -
EINVAL
;

3090 ià(!(
fže_š
->
f_mode
 & 
FMODE_READ
) ||

3091 !(
fže_out
->
f_mode
 & 
FMODE_WRITE
) ||

3092 (
fže_out
->
f_æags
 & 
O_APPEND
))

3093  -
EBADF
;

3096 
	}
}

3105 
	$g’”ic_cÝy_fže_checks
(
fže
 *
fže_š
, 
loff_t
 
pos_š
,

3106 
fže
 *
fže_out
, 
loff_t
 
pos_out
,

3107 
size_t
 *
»q_couÁ
, 
æags
)

3109 
šode
 *
šode_š
 = 
	`fže_šode
(
fže_š
);

3110 
šode
 *
šode_out
 = 
	`fže_šode
(
fže_out
);

3111 
ušt64_t
 
couÁ
 = *
»q_couÁ
;

3112 
loff_t
 
size_š
;

3113 
»t
;

3115 
»t
 = 
	`g’”ic_fže_rw_checks
(
fže_š
, 
fže_out
);

3116 ià(
»t
)

3117  
»t
;

3120 ià(
	`IS_IMMUTABLE
(
šode_out
))

3121  -
EPERM
;

3123 ià(
	`IS_SWAPFILE
(
šode_š
è|| IS_SWAPFILE(
šode_out
))

3124  -
ETXTBSY
;

3127 ià(
pos_š
 + 
couÁ
 <…os_š || 
pos_out
 + count <…os_out)

3128  -
EOVERFLOW
;

3131 
size_š
 = 
	`i_size_»ad
(
šode_š
);

3132 ià(
pos_š
 >ð
size_š
)

3133 
couÁ
 = 0;

3135 
couÁ
 = 
	`mš
(couÁ, 
size_š
 - (
ušt64_t
)
pos_š
);

3137 
»t
 = 
	`g’”ic_wr™e_check_lim™s
(
fže_out
, 
pos_out
, &
couÁ
);

3138 ià(
»t
)

3139  
»t
;

3142 ià(
šode_š
 =ð
šode_out
 &&

3143 
pos_out
 + 
couÁ
 > 
pos_š
 &&

3144 
pos_out
 < 
pos_š
 + 
couÁ
)

3145  -
EINVAL
;

3147 *
»q_couÁ
 = 
couÁ
;

3149 
	}
}

3151 
	$·geÿche_wr™e_begš
(
fže
 *fže, 
add»ss_¥aû
 *
m­pšg
,

3152 
loff_t
 
pos
, 
Ën
, 
æags
,

3153 
·ge
 **
·g•
, **
fsd©a
)

3155 cÚ¡ 
add»ss_¥aû_Ý”©iÚs
 *
aÝs
 = 
m­pšg
->
a_Ýs
;

3157  
aÝs
->
	`wr™e_begš
(
fže
, 
m­pšg
, 
pos
, 
Ën
, 
æags
,

3158 
·g•
, 
fsd©a
);

3159 
	}
}

3160 
EXPORT_SYMBOL
(
·geÿche_wr™e_begš
);

3162 
	$·geÿche_wr™e_’d
(
fže
 *fže, 
add»ss_¥aû
 *
m­pšg
,

3163 
loff_t
 
pos
, 
Ën
, 
cÝ›d
,

3164 
·ge
 *·ge, *
fsd©a
)

3166 cÚ¡ 
add»ss_¥aû_Ý”©iÚs
 *
aÝs
 = 
m­pšg
->
a_Ýs
;

3168  
aÝs
->
	`wr™e_’d
(
fže
, 
m­pšg
, 
pos
, 
Ën
, 
cÝ›d
, 
·ge
, 
fsd©a
);

3169 
	}
}

3170 
EXPORT_SYMBOL
(
·geÿche_wr™e_’d
);

3172 
ssize_t


3173 
	$g’”ic_fže_dœeù_wr™e
(
kiocb
 *
iocb
, 
iov_™”
 *
äom
)

3175 
fže
 *fžð
iocb
->
ki_fžp
;

3176 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

3177 
šode
 *šodð
m­pšg
->
ho¡
;

3178 
loff_t
 
pos
 = 
iocb
->
ki_pos
;

3179 
ssize_t
 
wr™‹n
;

3180 
size_t
 
wr™e_Ën
;

3181 
pgoff_t
 
’d
;

3183 
wr™e_Ën
 = 
	`iov_™”_couÁ
(
äom
);

3184 
’d
 = (
pos
 + 
wr™e_Ën
 - 1è>> 
PAGE_SHIFT
;

3186 ià(
iocb
->
ki_æags
 & 
IOCB_NOWAIT
) {

3188 ià(
	`fžem­_¿nge_has_·ge
(
šode
->
i_m­pšg
, 
pos
,

3189 
pos
 + 
wr™e_Ën
 - 1))

3190  -
EAGAIN
;

3192 
wr™‹n
 = 
	`fžem­_wr™e_ªd_wa™_¿nge
(
m­pšg
, 
pos
,

3193 
pos
 + 
wr™e_Ën
 - 1);

3194 ià(
wr™‹n
)

3195 
out
;

3204 
wr™‹n
 = 
	`šv®id©e_šode_·ges2_¿nge
(
m­pšg
,

3205 
pos
 >> 
PAGE_SHIFT
, 
’d
);

3210 ià(
wr™‹n
) {

3211 ià(
wr™‹n
 =ð-
EBUSY
)

3213 
out
;

3216 
wr™‹n
 = 
m­pšg
->
a_Ýs
->
	`dœeù_IO
(
iocb
, 
äom
);

3231 ià(
m­pšg
->
Ä·ges
)

3232 
	`šv®id©e_šode_·ges2_¿nge
(
m­pšg
,

3233 
pos
 >> 
PAGE_SHIFT
, 
’d
);

3235 ià(
wr™‹n
 > 0) {

3236 
pos
 +ð
wr™‹n
;

3237 
wr™e_Ën
 -ð
wr™‹n
;

3238 ià(
pos
 > 
	`i_size_»ad
(
šode
è&& !
	`S_ISBLK
(šode->
i_mode
)) {

3239 
	`i_size_wr™e
(
šode
, 
pos
);

3240 
	`m¬k_šode_dœty
(
šode
);

3242 
iocb
->
ki_pos
 = 
pos
;

3244 
	`iov_™”_»v”t
(
äom
, 
wr™e_Ën
 - 
	`iov_™”_couÁ
(from));

3245 
out
:

3246  
wr™‹n
;

3247 
	}
}

3248 
EXPORT_SYMBOL
(
g’”ic_fže_dœeù_wr™e
);

3254 
·ge
 *
	$g¿b_ÿche_·ge_wr™e_begš
(
add»ss_¥aû
 *
m­pšg
,

3255 
pgoff_t
 
šdex
, 
æags
)

3257 
·ge
 *page;

3258 
fgp_æags
 = 
FGP_LOCK
|
FGP_WRITE
|
FGP_CREAT
;

3260 ià(
æags
 & 
AOP_FLAG_NOFS
)

3261 
fgp_æags
 |ð
FGP_NOFS
;

3263 
·ge
 = 
	`·geÿche_g‘_·ge
(
m­pšg
, 
šdex
, 
fgp_æags
,

3264 
	`m­pšg_gå_mask
(
m­pšg
));

3265 ià(
·ge
)

3266 
	`wa™_fÜ_¡abË_·ge
(
·ge
);

3268  
·ge
;

3269 
	}
}

3270 
EXPORT_SYMBOL
(
g¿b_ÿche_·ge_wr™e_begš
);

3273 
	gb®ªû_dœty_·ges_¿‹lim™ed_couÁ
 = 0;

3274 
	gb®ªû_dœty_·ges_¿‹lim™ed_time
 = 0;

3276 
ssize_t
 
	$pxt4_g’”ic_³rfÜm_wr™e
(
fže
 *file,

3277 
iov_™”
 *
i
, 
loff_t
 
pos
)

3279 
add»ss_¥aû
 *
m­pšg
 = 
fže
->
f_m­pšg
;

3280 cÚ¡ 
add»ss_¥aû_Ý”©iÚs
 *
a_Ýs
 = 
m­pšg
->a_ops;

3281 
¡©us
 = 0;

3282 
ssize_t
 
wr™‹n
 = 0;

3283 
æags
 = 0;

3286 
·ge
 *page;

3287 
off£t
;

3288 
by‹s
;

3289 
size_t
 
cÝ›d
;

3290 *
fsd©a
;

3292 
off£t
 = (
pos
 & (
PAGE_SIZE
 - 1));

3293 
by‹s
 = 
	`mš_t
(, 
PAGE_SIZE
 - 
off£t
,

3294 
	`iov_™”_couÁ
(
i
));

3296 
agaš
:

3307 ià(
	`uÆik–y
(
	`iov_™”_çuÉ_š_»adabË
(
i
, 
by‹s
))) {

3308 
¡©us
 = -
EFAULT
;

3312 ià(
	`çl_sigÇl_³ndšg
(
cu¼’t
)) {

3313 
¡©us
 = -
EINTR
;

3317 
¡©us
 = 
a_Ýs
->
	`wr™e_begš
(
fže
, 
m­pšg
, 
pos
, 
by‹s
, 
æags
,

3318 &
·ge
, &
fsd©a
);

3319 ià(
	`uÆik–y
(
¡©us
 < 0))

3322 ià(
	`m­pšg_wr™ably_m­³d
(
m­pšg
))

3323 
	`æush_dÿche_·ge
(
·ge
);

3325 
cÝ›d
 = 
	`iov_™”_cÝy_äom_u£r_©omic
(
·ge
, 
i
, 
off£t
, 
by‹s
);

3326 
	`æush_dÿche_·ge
(
·ge
);

3328 
¡©us
 = 
a_Ýs
->
	`wr™e_’d
(
fže
, 
m­pšg
, 
pos
, 
by‹s
, 
cÝ›d
,

3329 
·ge
, 
fsd©a
);

3330 ià(
	`uÆik–y
(
¡©us
 < 0))

3332 
cÝ›d
 = 
¡©us
;

3334 
	`cÚd_»sched
();

3336 
	`iov_™”_advªû
(
i
, 
cÝ›d
);

3337 ià(
	`uÆik–y
(
cÝ›d
 == 0)) {

3346 
by‹s
 = 
	`mš_t
(, 
PAGE_SIZE
 - 
off£t
,

3347 
	`iov_™”_sšgË_£g_couÁ
(
i
));

3348 
agaš
;

3350 
pos
 +ð
cÝ›d
;

3351 
wr™‹n
 +ð
cÝ›d
;

3353 
time¥ec
 
loÿlþock
[2];

3354 
	`g‘¿wmÚÙÚic
(&
loÿlþock
[0]);

3355 
	`b®ªû_dœty_·ges_¿‹lim™ed
(
m­pšg
);

3356 
	`g‘¿wmÚÙÚic
(&
loÿlþock
[1]);

3357 
	`ÿlþock
(
loÿlþock
, &
b®ªû_dœty_·ges_¿‹lim™ed_time
,

3358 &
b®ªû_dœty_·ges_¿‹lim™ed_couÁ
);

3359 } 
	`iov_™”_couÁ
(
i
));

3361  
wr™‹n
 ? wr™‹À: 
¡©us
;

3362 
	}
}

3387 
	gfže_wr™e_™”_time
 = 0;

3388 
	gfže_wr™e_™”_couÁ
 = 0;

3389 
ssize_t
 
	$__pxt4_g’”ic_fže_wr™e_™”
(
kiocb
 *
iocb
, 
iov_™”
 *
äom
)

3391 
fže
 *fžð
iocb
->
ki_fžp
;

3392 
add»ss_¥aû
 * 
m­pšg
 = 
fže
->
f_m­pšg
;

3393 
šode
 *šodð
m­pšg
->
ho¡
;

3394 
ssize_t
 
wr™‹n
 = 0;

3395 
ssize_t
 
”r
;

3396 
ssize_t
 
¡©us
;

3399 
cu¼’t
->
backšg_dev_šfo
 = 
	`šode_to_bdi
(
šode
);

3400 
”r
 = 
	`fže_»move_´ivs
(
fže
);

3401 ià(
”r
)

3402 
out
;

3404 
”r
 = 
	`fže_upd©e_time
(
fže
);

3405 ià(
”r
)

3406 
out
;

3408 ià(
iocb
->
ki_æags
 & 
IOCB_DIRECT
) {

3409 
loff_t
 
pos
, 
’dby‹
;

3411 
wr™‹n
 = 
	`g’”ic_fže_dœeù_wr™e
(
iocb
, 
äom
);

3419 ià(
wr™‹n
 < 0 || !
	`iov_™”_couÁ
(
äom
è|| 
	`IS_DAX
(
šode
))

3420 
out
;

3422 
¡©us
 = 
	`pxt4_g’”ic_³rfÜm_wr™e
(
fže
, 
äom
, 
pos
 = 
iocb
->
ki_pos
);

3430 ià(
	`uÆik–y
(
¡©us
 < 0)) {

3431 
”r
 = 
¡©us
;

3432 
out
;

3439 
’dby‹
 = 
pos
 + 
¡©us
 - 1;

3440 
”r
 = 
	`fžem­_wr™e_ªd_wa™_¿nge
(
m­pšg
, 
pos
, 
’dby‹
);

3441 ià(
”r
 == 0) {

3442 
iocb
->
ki_pos
 = 
’dby‹
 + 1;

3443 
wr™‹n
 +ð
¡©us
;

3444 
	`šv®id©e_m­pšg_·ges
(
m­pšg
,

3445 
pos
 >> 
PAGE_SHIFT
,

3446 
’dby‹
 >> 
PAGE_SHIFT
);

3454 
time¥ec
 
loÿlþock
[2];

3455 
	`g‘¿wmÚÙÚic
(&
loÿlþock
[0]);

3456 
wr™‹n
 = 
	`pxt4_g’”ic_³rfÜm_wr™e
(
fže
, 
äom
, 
iocb
->
ki_pos
);

3457 
	`g‘¿wmÚÙÚic
(&
loÿlþock
[1]);

3458 
	`ÿlþock
(
loÿlþock
, &
fže_wr™e_™”_time
, &
fže_wr™e_™”_couÁ
);

3459 ià(
	`lik–y
(
wr™‹n
 > 0))

3460 
iocb
->
ki_pos
 +ð
wr™‹n
;

3462 
out
:

3463 
cu¼’t
->
backšg_dev_šfo
 = 
NULL
;

3464  
wr™‹n
 ? wr™‹À: 
”r
;

3465 
	}
}

3483 
ssize_t
 
	$g’”ic_fže_wr™e_™”
(
kiocb
 *
iocb
, 
iov_™”
 *
äom
)

3485 
fže
 *fžð
iocb
->
ki_fžp
;

3486 
šode
 *šodð
fže
->
f_m­pšg
->
ho¡
;

3487 
ssize_t
 
»t
;

3489 
	`šode_lock
(
šode
);

3490 
»t
 = 
	`g’”ic_wr™e_checks
(
iocb
, 
äom
);

3491 ià(
»t
 > 0)

3492 
»t
 = 
	`__g’”ic_fže_wr™e_™”
(
iocb
, 
äom
);

3493 
	`šode_uÆock
(
šode
);

3495 ià(
»t
 > 0)

3496 
»t
 = 
	`g’”ic_wr™e_sync
(
iocb
,„et);

3497  
»t
;

3498 
	}
}

3499 
EXPORT_SYMBOL
(
g’”ic_fže_wr™e_™”
);

3518 
	$Œy_to_»Ëa£_·ge
(
·ge
 *·ge, 
gå_t
 
gå_mask
)

3520 
add»ss_¥aû
 * cÚ¡ 
m­pšg
 = 
·ge
->mapping;

3522 
	`BUG_ON
(!
	`PageLocked
(
·ge
));

3523 ià(
	`PageWr™eback
(
·ge
))

3526 ià(
m­pšg
 && m­pšg->
a_Ýs
->
»Ëa£·ge
)

3527  
m­pšg
->
a_Ýs
->
	`»Ëa£·ge
(
·ge
, 
gå_mask
);

3528  
	`Œy_to_ä“_bufãrs
(
·ge
);

3529 
	}
}

3531 
EXPORT_SYMBOL
(
Œy_to_»Ëa£_·ge
);

	@internal.h

7 #iâdeà
__MM_INTERNAL_H


8 
	#__MM_INTERNAL_H


	)

10 
	~<lšux/fs.h
>

11 
	~<lšux/mm.h
>

12 
	~<lšux/·gem­.h
>

13 
	~<lšux/Œaûpošt-defs.h
>

21 
	#GFP_RECLAIM_MASK
 (
__GFP_RECLAIM
|
__GFP_HIGH
|
__GFP_IO
|
__GFP_FS
|\

22 
__GFP_NOWARN
|
__GFP_RETRY_MAYFAIL
|
__GFP_NOFAIL
|\

23 
__GFP_NORETRY
|
__GFP_MEMALLOC
|
__GFP_NOMEMALLOC
|\

24 
__GFP_ATOMIC
)

	)

27 
	#GFP_BOOT_MASK
 (
__GFP_BITS_MASK
 & ~(
__GFP_RECLAIM
|
__GFP_IO
|
__GFP_FS
))

	)

30 
	#GFP_CONSTRAINT_MASK
 (
__GFP_HARDWALL
|
__GFP_THISNODE
)

	)

33 
	#GFP_SLAB_BUG_MASK
 (
__GFP_DMA32
|
__GFP_HIGHMEM
|~
__GFP_BITS_MASK
)

	)

35 
·ge_wr™eback_š™
();

37 
vm_çuÉ_t
 
do_sw­_·ge
(
vm_çuÉ
 *
vmf
);

39 
ä“_pgbËs
(
mmu_g©h”
 *
Žb
, 
vm_¬—_¡ruù
 *
¡¬t_vma
,

40 
æoÜ
, 
ûžšg
);

42 
šlše
 
boÞ
 
	$ÿn_madv_Ìu_vma
(
vm_¬—_¡ruù
 *
vma
)

44  !(
vma
->
vm_æags
 & (
VM_LOCKED
|
VM_HUGETLB
|
VM_PFNMAP
));

45 
	}
}

47 
unm­_·ge_¿nge
(
mmu_g©h”
 *
Žb
,

48 
vm_¬—_¡ruù
 *
vma
,

49 
addr
, 
’d
,

50 
z­_d‘ažs
 *
d‘ažs
);

52 
__do_·ge_ÿche_»adah—d
(
add»ss_¥aû
 *
m­pšg
,

53 
fže
 *
fžp
, 
pgoff_t
 
off£t
, 
Ä_to_»ad
,

54 
lookah—d_size
);

59 
šlše
 
	$¿_subm™
(
fže_¿_¡©e
 *
¿
,

60 
add»ss_¥aû
 *
m­pšg
, 
fže
 *
fžp
)

62  
	`__do_·ge_ÿche_»adah—d
(
m­pšg
, 
fžp
,

63 
¿
->
¡¬t
,„a->
size
,„a->
async_size
);

64 
	}
}

70 
šlše
 
	$£t_·ge_»fcouÁed
(
·ge
 *page)

72 
	`VM_BUG_ON_PAGE
(
	`PageTaž
(
·ge
),…age);

73 
	`VM_BUG_ON_PAGE
(
	`·ge_»f_couÁ
(
·ge
),…age);

74 
	`£t_·ge_couÁ
(
·ge
, 1);

75 
	}
}

77 
highe¡_memm­_pâ
;

83 
	#MAX_RECLAIM_RETRIES
 16

	)

88 
isÞ©e_Ìu_·ge
(
·ge
 *page);

89 
putback_Ìu_·ge
(
·ge
 *page);

94 
pmd_t
 *
mm_fšd_pmd
(
mm_¡ruù
 *
mm
, 
add»ss
);

113 
	s®loc_cÚ‹xt
 {

114 
zÚ–i¡
 *
	mzÚ–i¡
;

115 
nodemask_t
 *
	mnodemask
;

116 
zÚ”ef
 *
	m´eã¼ed_zÚ”ef
;

117 
	mmig¿‹ty³
;

118 
zÚe_ty³
 
	mhigh_zÚeidx
;

119 
boÞ
 
	m¥»ad_dœty_·ges
;

122 
	#ac_þasszÚe_idx
(
ac
è
	`zÚ–i¡_zÚe_idx
×c->
´eã¼ed_zÚ”ef
)

	)

141 
šlše
 

142 
	$__fšd_buddy_pâ
(
·ge_pâ
, 
Üd”
)

144  
·ge_pâ
 ^ (1 << 
Üd”
);

145 
	}
}

147 
·ge
 *
__·geblock_pâ_to_·ge
(
¡¬t_pâ
,

148 
’d_pâ
, 
zÚe
 *zone);

150 
šlše
 
·ge
 *
	$·geblock_pâ_to_·ge
(
¡¬t_pâ
,

151 
’d_pâ
, 
zÚe
 *zone)

153 ià(
zÚe
->
cÚtiguous
)

154  
	`pâ_to_·ge
(
¡¬t_pâ
);

156  
	`__·geblock_pâ_to_·ge
(
¡¬t_pâ
, 
’d_pâ
, 
zÚe
);

157 
	}
}

159 
__isÞ©e_ä“_·ge
(
·ge
 *·ge, 
Üd”
);

160 
memblock_ä“_·ges
(
·ge
 *·ge, 
pâ
,

161 
Üd”
);

162 
__ä“_·ges_cÜe
(
·ge
 *·ge, 
Üd”
);

163 
´•_compound_·ge
(
·ge
 *·ge, 
Üd”
);

164 
po¡_®loc_hook
(
·ge
 *·ge, 
Üd”
,

165 
gå_t
 
gå_æags
);

166 
u£r_mš_ä“_kby‹s
;

168 #ià
defšed
 
CONFIG_COMPACTION
 || defšed 
CONFIG_CMA


180 
	scom·ù_cÚŒÞ
 {

181 
li¡_h—d
 
	mä“·ges
;

182 
li¡_h—d
 
	mmig¿‹·ges
;

183 
	mÄ_ä“·ges
;

184 
	mÄ_mig¿‹·ges
;

185 
	mä“_pâ
;

186 
	mmig¿‹_pâ
;

187 
	mç¡_¡¬t_pâ
;

188 
zÚe
 *
	mzÚe
;

189 
	mtÙ®_mig¿‹_sÿÂed
;

190 
	mtÙ®_ä“_sÿÂed
;

191 
	mç¡_£¬ch_çž
;

192 
	m£¬ch_Üd”
;

193 cÚ¡ 
gå_t
 
	mgå_mask
;

194 
	mÜd”
;

195 
	mmig¿‹ty³
;

196 cÚ¡ 
	m®loc_æags
;

197 cÚ¡ 
	mþasszÚe_idx
;

198 
mig¿‹_mode
 
	mmode
;

199 
boÞ
 
	mignÜe_sk_hšt
;

200 
boÞ
 
	mno_£t_sk_hšt
;

201 
boÞ
 
	mignÜe_block_su™abË
;

202 
boÞ
 
	mdœeù_com·ùiÚ
;

203 
boÞ
 
	mwhÞe_zÚe
;

204 
boÞ
 
	mcÚ‹nded
;

205 
boÞ
 
	m»sÿn
;

212 
	sÿ±u»_cÚŒÞ
 {

213 
com·ù_cÚŒÞ
 *
	mcc
;

214 
·ge
 *
	m·ge
;

218 
isÞ©e_ä“·ges_¿nge
(
com·ù_cÚŒÞ
 *
cc
,

219 
¡¬t_pâ
, 
’d_pâ
);

221 
isÞ©e_mig¿‹·ges_¿nge
(
com·ù_cÚŒÞ
 *
cc
,

222 
low_pâ
, 
’d_pâ
);

223 
fšd_su™abË_çÎback
(
ä“_¬—
 *
¬—
, 
Üd”
,

224 
mig¿‹ty³
, 
boÞ
 
Úly_¡—ÏbË
, boÞ *
ÿn_¡—l
);

236 
šlše
 
	$·ge_Üd”
(
·ge
 *page)

239  
	`·ge_´iv©e
(
·ge
);

240 
	}
}

253 
	#·ge_Üd”_un§ã
(
·ge
è
	`READ_ONCE
(
	`·ge_´iv©e
Õage))

	)

255 
šlše
 
boÞ
 
	$is_cow_m­pšg
(
vm_æags_t
 
æags
)

257  (
æags
 & (
VM_SHARED
 | 
VM_MAYWRITE
)) == VM_MAYWRITE;

258 
	}
}

267 
šlše
 
boÞ
 
	$is_exec_m­pšg
(
vm_æags_t
 
æags
)

269  (
æags
 & (
VM_EXEC
 | 
VM_WRITE
 | 
VM_STACK
)) == VM_EXEC;

270 
	}
}

278 
šlše
 
boÞ
 
	$is_¡ack_m­pšg
(
vm_æags_t
 
æags
)

280  (
æags
 & 
VM_STACK
) == VM_STACK;

281 
	}
}

286 
šlše
 
boÞ
 
	$is_d©a_m­pšg
(
vm_æags_t
 
æags
)

288  (
æags
 & (
VM_WRITE
 | 
VM_SHARED
 | 
VM_STACK
)) == VM_WRITE;

289 
	}
}

292 
__vma_lšk_li¡
(
mm_¡ruù
 *
mm
, 
vm_¬—_¡ruù
 *
vma
,

293 
vm_¬—_¡ruù
 *
´ev
, 
rb_node
 *
rb_·»Á
);

295 #ifdeà
CONFIG_MMU


296 
pÝuÏ‹_vma_·ge_¿nge
(
vm_¬—_¡ruù
 *
vma
,

297 
¡¬t
, 
’d
, *
nÚblockšg
);

298 
muÆock_vma_·ges_¿nge
(
vm_¬—_¡ruù
 *
vma
,

299 
¡¬t
, 
’d
);

300 
šlše
 
	$muÆock_vma_·ges_®l
(
vm_¬—_¡ruù
 *
vma
)

302 
	`muÆock_vma_·ges_¿nge
(
vma
, vma->
vm_¡¬t
, vma->
vm_’d
);

303 
	}
}

308 
mlock_vma_·ge
(
·ge
 *page);

309 
muÆock_vma_·ge
(
·ge
 *page);

320 
þ—r_·ge_mlock
(
·ge
 *page);

327 
šlše
 
	$mlock_mig¿‹_·ge
(
·ge
 *
Ãw·ge
, page *page)

329 ià(
	`Te¡CË¬PageMlocked
(
·ge
)) {

330 
Ä_·ges
 = 
	`h·ge_Ä_·ges
(
·ge
);

333 
	`__mod_zÚe_·ge_¡©e
(
	`·ge_zÚe
(
·ge
), 
NR_MLOCK
, -
Ä_·ges
);

334 
	`S‘PageMlocked
(
Ãw·ge
);

335 
	`__mod_zÚe_·ge_¡©e
(
	`·ge_zÚe
(
Ãw·ge
), 
NR_MLOCK
, 
Ä_·ges
);

337 
	}
}

339 
pmd_t
 
maybe_pmd_mkwr™e
Õmd_ˆ
pmd
, 
vm_¬—_¡ruù
 *
vma
);

346 
šlše
 

347 
	$vma_add»ss
(
·ge
 *·ge, 
vm_¬—_¡ruù
 *
vma
)

349 
pgoff_t
 
pgoff
;

350 
add»ss
;

352 
	`VM_BUG_ON_PAGE
(
	`PageKsm
(
·ge
),…age);

353 
pgoff
 = 
	`·ge_to_pgoff
(
·ge
);

354 ià(
pgoff
 >ð
vma
->
vm_pgoff
) {

355 
add»ss
 = 
vma
->
vm_¡¬t
 +

356 ((
pgoff
 - 
vma
->
vm_pgoff
è<< 
PAGE_SHIFT
);

358 ià(
add»ss
 < 
vma
->
vm_¡¬t
 ||‡dd»s >ðvma->
vm_’d
)

359 
add»ss
 = -
EFAULT
;

360 } ià(
	`PageH—d
(
·ge
) &&

361 
pgoff
 + 
	`compound_Ä
(
·ge
è- 1 >ð
vma
->
vm_pgoff
) {

363 
add»ss
 = 
vma
->
vm_¡¬t
;

365 
add»ss
 = -
EFAULT
;

367  
add»ss
;

368 
	}
}

375 
šlše
 

376 
	$vma_add»ss_’d
(
·ge
 *·ge, 
vm_¬—_¡ruù
 *
vma
)

378 
pgoff_t
 
pgoff
;

379 
add»ss
;

381 
	`VM_BUG_ON_PAGE
(
	`PageKsm
(
·ge
),…age);

382 
pgoff
 = 
	`·ge_to_pgoff
(
·ge
è+ 
	`compound_Ä
(page);

383 
add»ss
 = 
vma
->
vm_¡¬t
 + ((
pgoff
 - vma->
vm_pgoff
è<< 
PAGE_SHIFT
);

385 ià(
add»ss
 < 
vma
->
vm_¡¬t
 ||‡dd»s > vma->
vm_’d
)

386 
add»ss
 = 
vma
->
vm_’d
;

387  
add»ss
;

388 
	}
}

390 
šlše
 
fže
 *
	$maybe_uÆock_mm­_fÜ_io
(
vm_çuÉ
 *
vmf
,

391 
fže
 *
åš
)

393 
æags
 = 
vmf
->flags;

395 ià(
åš
)

396  
åš
;

403 ià((
æags
 & (
FAULT_FLAG_ALLOW_RETRY
 | 
FAULT_FLAG_RETRY_NOWAIT
)) ==

404 
FAULT_FLAG_ALLOW_RETRY
) {

405 
åš
 = 
	`g‘_fže
(
vmf
->
vma
->
vm_fže
);

406 
	`up_»ad
(&
vmf
->
vma
->
vm_mm
->
mm­_£m
);

408  
åš
;

409 
	}
}

412 
šlše
 
	$þ—r_·ge_mlock
(
·ge
 *·geè{ 
	}
}

413 
šlše
 
	$mlock_vma_·ge
(
·ge
 *·geè{ 
	}
}

414 
šlše
 
	$mlock_mig¿‹_·ge
(
·ge
 *
Ãw
, ·g*
Þd
è{ 
	}
}

423 
šlše
 
·ge
 *
	$mem_m­_off£t
(
·ge
 *
ba£
, 
off£t
)

425 ià(
	`uÆik–y
(
off£t
 >ð
MAX_ORDER_NR_PAGES
))

426  
	`Áh_·ge
(
ba£
, 
off£t
);

427  
ba£
 + 
off£t
;

428 
	}
}

434 
šlše
 
·ge
 *
	$mem_m­_Ãxt
(
·ge
 *
™”
,

435 
·ge
 *
ba£
, 
off£t
)

437 ià(
	`uÆik–y
((
off£t
 & (
MAX_ORDER_NR_PAGES
 - 1)) == 0)) {

438 
pâ
 = 
	`·ge_to_pâ
(
ba£
è+ 
off£t
;

439 ià(!
	`pâ_v®id
(
pâ
))

440  
NULL
;

441  
	`pâ_to_·ge
(
pâ
);

443  
™”
 + 1;

444 
	}
}

447 
	emmš™_Ëv–
 {

448 
	mMMINIT_WARNING
,

449 
	mMMINIT_VERIFY
,

450 
	mMMINIT_TRACE


453 #ifdeà
CONFIG_DEBUG_MEMORY_INIT


455 
mmš™_logËv–
;

457 
	#mmš™_d´štk
(
Ëv–
, 
´efix
, 
fmt
, 
¬g
...) \

459 ià(
Ëv–
 < 
mmš™_logËv–
) { \

460 ià(
Ëv–
 <ð
MMINIT_WARNING
) \

461 
	`´_w¬n
("mmš™::" 
´efix
 " " 
fmt
, ##
¬g
); \

463 
	`´štk
(
KERN_DEBUG
 "mmš™::" 
´efix
 " " 
fmt
, ##
¬g
); \

465 } 0)

	)

467 
mmš™_v”ify_·geæags_Ïyout
();

468 
mmš™_v”ify_zÚ–i¡
();

471 
šlše
 
	$mmš™_d´štk
(
mmš™_Ëv–
 
Ëv–
,

472 cÚ¡ *
´efix
, cÚ¡ *
fmt
, ...)

474 
	}
}

476 
šlše
 
	$mmš™_v”ify_·geæags_Ïyout
()

478 
	}
}

480 
šlše
 
	$mmš™_v”ify_zÚ–i¡
()

482 
	}
}

486 #ià
defšed
(
CONFIG_SPARSEMEM
)

487 
mmš™_v®id©e_memmod–_lim™s
(*
¡¬t_pâ
,

488 *
’d_pâ
);

490 
šlše
 
	$mmš™_v®id©e_memmod–_lim™s
(*
¡¬t_pâ
,

491 *
’d_pâ
)

493 
	}
}

496 
	#NODE_RECLAIM_NOSCAN
 -2

	)

497 
	#NODE_RECLAIM_FULL
 -1

	)

498 
	#NODE_RECLAIM_SOME
 0

	)

499 
	#NODE_RECLAIM_SUCCESS
 1

	)

501 #ifdeà
CONFIG_NUMA


502 
node_»þaim
(
pgli¡_d©a
 *, 
gå_t
, );

504 
šlše
 
	$node_»þaim
(
pgli¡_d©a
 *
pgd©
, 
gå_t
 
mask
,

505 
Üd”
)

507  
NODE_RECLAIM_NOSCAN
;

508 
	}
}

511 
hwpoisÚ_fž‹r
(
·ge
 *
p
);

513 
u32
 
hwpoisÚ_fž‹r_dev_majÜ
;

514 
u32
 
hwpoisÚ_fž‹r_dev_mšÜ
;

515 
u64
 
hwpoisÚ_fž‹r_æags_mask
;

516 
u64
 
hwpoisÚ_fž‹r_æags_v®ue
;

517 
u64
 
hwpoisÚ_fž‹r_memcg
;

518 
u32
 
hwpoisÚ_fž‹r_’abË
;

520 
__mu¡_check
 
vm_mm­_pgoff
(
fže
 *, ,

524 
£t_·geblock_Üd”
();

525 
»þaim_þ—n_·ges_äom_li¡
(
zÚe
 *zone,

526 
li¡_h—d
 *
·ge_li¡
);

528 
	#ALLOC_WMARK_MIN
 
WMARK_MIN


	)

529 
	#ALLOC_WMARK_LOW
 
WMARK_LOW


	)

530 
	#ALLOC_WMARK_HIGH
 
WMARK_HIGH


	)

531 
	#ALLOC_NO_WATERMARKS
 0x04

	)

534 
	#ALLOC_WMARK_MASK
 (
ALLOC_NO_WATERMARKS
-1)

	)

541 #ifdeà
CONFIG_MMU


542 
	#ALLOC_OOM
 0x08

	)

544 
	#ALLOC_OOM
 
ALLOC_NO_WATERMARKS


	)

547 
	#ALLOC_HARDER
 0x10

	)

548 
	#ALLOC_HIGH
 0x20

	)

549 
	#ALLOC_CPUSET
 0x40

	)

550 
	#ALLOC_CMA
 0x80

	)

551 #ifdeà
CONFIG_ZONE_DMA32


552 
	#ALLOC_NOFRAGMENT
 0x100

	)

554 
	#ALLOC_NOFRAGMENT
 0x0

	)

556 
	#ALLOC_KSWAPD
 0x200

	)

558 
	g‰u_æags
;

559 
	gŽbæush_unm­_b©ch
;

566 
wÜkqueue_¡ruù
 *
mm_³rýu_wq
;

568 #ifdeà
CONFIG_ARCH_WANT_BATCHED_UNMAP_TLB_FLUSH


569 
Œy_to_unm­_æush
();

570 
Œy_to_unm­_æush_dœty
();

571 
æush_Žb_b©ched_³ndšg
(
mm_¡ruù
 *
mm
);

573 
šlše
 
	$Œy_to_unm­_æush
()

575 
	}
}

576 
šlše
 
	$Œy_to_unm­_æush_dœty
()

578 
	}
}

579 
šlše
 
	$æush_Žb_b©ched_³ndšg
(
mm_¡ruù
 *
mm
)

581 
	}
}

584 cÚ¡ 
Œaû_´št_æags
 
·geæag_Çmes
[];

585 cÚ¡ 
Œaû_´št_æags
 
vmaæag_Çmes
[];

586 cÚ¡ 
Œaû_´št_æags
 
gåæag_Çmes
[];

588 
šlše
 
boÞ
 
	$is_mig¿‹_high©omic
(
mig¿‹ty³
 migratetype)

590  
mig¿‹ty³
 =ð
MIGRATE_HIGHATOMIC
;

591 
	}
}

593 
šlše
 
boÞ
 
	$is_mig¿‹_high©omic_·ge
(
·ge
 *page)

595  
	`g‘_·geblock_mig¿‹ty³
(
·ge
è=ð
MIGRATE_HIGHATOMIC
;

596 
	}
}

598 
£tup_zÚe_·ge£t
(
zÚe
 *zone);

599 
·ge
 *
®loc_Ãw_node_·ge
(·g*·ge, 
node
);

	@../calclock.h

1 #iâdeà
__CALCLOCK_H


2 
	#__CALCLOCK_H


	)

4 
	~<lšux/time.h
>

6 
	#BILLION
 1000000000UL

	)

8 
ÿlþock
(
time¥ec
 *
myþock
,

9 *
tÙ®_time
, *
tÙ®_couÁ
);

	@/usr/include/linux/capability.h

14 #iâdeà
_LINUX_CAPABILITY_H


15 
	#_LINUX_CAPABILITY_H


	)

17 
	~<lšux/ty³s.h
>

30 
	#_LINUX_CAPABILITY_VERSION_1
 0x19980330

	)

31 
	#_LINUX_CAPABILITY_U32S_1
 1

	)

33 
	#_LINUX_CAPABILITY_VERSION_2
 0x20071026

	)

34 
	#_LINUX_CAPABILITY_U32S_2
 2

	)

36 
	#_LINUX_CAPABILITY_VERSION_3
 0x20080522

	)

37 
	#_LINUX_CAPABILITY_U32S_3
 2

	)

39 
	s__u£r_ÿp_h—d”_¡ruù
 {

40 
__u32
 
	mv”siÚ
;

41 
	mpid
;

42 } *
	tÿp_u£r_h—d”_t
;

44 
	s__u£r_ÿp_d©a_¡ruù
 {

45 
__u32
 
	mefãùive
;

46 
__u32
 
	m³rm™‹d
;

47 
__u32
 
	mšh”™abË
;

48 } *
	tÿp_u£r_d©a_t
;

51 
	#VFS_CAP_REVISION_MASK
 0xFF000000

	)

52 
	#VFS_CAP_REVISION_SHIFT
 24

	)

53 
	#VFS_CAP_FLAGS_MASK
 ~
VFS_CAP_REVISION_MASK


	)

54 
	#VFS_CAP_FLAGS_EFFECTIVE
 0x000001

	)

56 
	#VFS_CAP_REVISION_1
 0x01000000

	)

57 
	#VFS_CAP_U32_1
 1

	)

58 
	#XATTR_CAPS_SZ_1
 ((
__Ë32
)*(1 + 2*
VFS_CAP_U32_1
))

	)

60 
	#VFS_CAP_REVISION_2
 0x02000000

	)

61 
	#VFS_CAP_U32_2
 2

	)

62 
	#XATTR_CAPS_SZ_2
 ((
__Ë32
)*(1 + 2*
VFS_CAP_U32_2
))

	)

64 
	#VFS_CAP_REVISION_3
 0x03000000

	)

65 
	#VFS_CAP_U32_3
 2

	)

66 
	#XATTR_CAPS_SZ_3
 ((
__Ë32
)*(2 + 2*
VFS_CAP_U32_3
))

	)

68 
	#XATTR_CAPS_SZ
 
XATTR_CAPS_SZ_3


	)

69 
	#VFS_CAP_U32
 
VFS_CAP_U32_3


	)

70 
	#VFS_CAP_REVISION
 
VFS_CAP_REVISION_3


	)

72 
	svfs_ÿp_d©a
 {

73 
__Ë32
 
	mmagic_‘c
;

75 
__Ë32
 
	m³rm™‹d
;

76 
__Ë32
 
	mšh”™abË
;

77 } 
	md©a
[
VFS_CAP_U32
];

83 
	svfs_ns_ÿp_d©a
 {

84 
__Ë32
 
	mmagic_‘c
;

86 
__Ë32
 
	m³rm™‹d
;

87 
__Ë32
 
	mšh”™abË
;

88 } 
	md©a
[
VFS_CAP_U32
];

89 
__Ë32
 
	mroÙid
;

98 
	#_LINUX_CAPABILITY_VERSION
 
_LINUX_CAPABILITY_VERSION_1


	)

99 
	#_LINUX_CAPABILITY_U32S
 
_LINUX_CAPABILITY_U32S_1


	)

111 
	#CAP_CHOWN
 0

	)

117 
	#CAP_DAC_OVERRIDE
 1

	)

123 
	#CAP_DAC_READ_SEARCH
 2

	)

129 
	#CAP_FOWNER
 3

	)

138 
	#CAP_FSETID
 4

	)

144 
	#CAP_KILL
 5

	)

150 
	#CAP_SETGID
 6

	)

155 
	#CAP_SETUID
 7

	)

172 
	#CAP_SETPCAP
 8

	)

176 
	#CAP_LINUX_IMMUTABLE
 9

	)

181 
	#CAP_NET_BIND_SERVICE
 10

	)

185 
	#CAP_NET_BROADCAST
 11

	)

201 
	#CAP_NET_ADMIN
 12

	)

207 
	#CAP_NET_RAW
 13

	)

213 
	#CAP_IPC_LOCK
 14

	)

217 
	#CAP_IPC_OWNER
 15

	)

220 
	#CAP_SYS_MODULE
 16

	)

225 
	#CAP_SYS_RAWIO
 17

	)

229 
	#CAP_SYS_CHROOT
 18

	)

233 
	#CAP_SYS_PTRACE
 19

	)

237 
	#CAP_SYS_PACCT
 20

	)

276 
	#CAP_SYS_ADMIN
 21

	)

280 
	#CAP_SYS_BOOT
 22

	)

289 
	#CAP_SYS_NICE
 23

	)

303 
	#CAP_SYS_RESOURCE
 24

	)

309 
	#CAP_SYS_TIME
 25

	)

314 
	#CAP_SYS_TTY_CONFIG
 26

	)

318 
	#CAP_MKNOD
 27

	)

322 
	#CAP_LEASE
 28

	)

326 
	#CAP_AUDIT_WRITE
 29

	)

330 
	#CAP_AUDIT_CONTROL
 30

	)

332 
	#CAP_SETFCAP
 31

	)

340 
	#CAP_MAC_OVERRIDE
 32

	)

349 
	#CAP_MAC_ADMIN
 33

	)

353 
	#CAP_SYSLOG
 34

	)

357 
	#CAP_WAKE_ALARM
 35

	)

361 
	#CAP_BLOCK_SUSPEND
 36

	)

365 
	#CAP_AUDIT_READ
 37

	)

368 
	#CAP_LAST_CAP
 
CAP_AUDIT_READ


	)

370 
	#ÿp_v®id
(
x
è((xè>ð0 && (xè<ð
CAP_LAST_CAP
)

	)

376 
	#CAP_TO_INDEX
(
x
è((xè>> 5è

	)

377 
	#CAP_TO_MASK
(
x
è(1 << ((xè& 31)è

	)

	@/usr/include/linux/fs.h

2 #iâdeà
_LINUX_FS_H


3 
	#_LINUX_FS_H


	)

13 
	~<lšux/lim™s.h
>

14 
	~<lšux/ioùl.h
>

15 
	~<lšux/ty³s.h
>

16 
	~<lšux/fsüy±.h
>

19 
	~<lšux/mouÁ.h
>

32 #undeà
NR_OPEN


33 
	#INR_OPEN_CUR
 1024

	)

34 
	#INR_OPEN_MAX
 4096

	)

36 
	#BLOCK_SIZE_BITS
 10

	)

37 
	#BLOCK_SIZE
 (1<<
BLOCK_SIZE_BITS
)

	)

39 
	#SEEK_SET
 0

	)

40 
	#SEEK_CUR
 1

	)

41 
	#SEEK_END
 2

	)

42 
	#SEEK_DATA
 3

	)

43 
	#SEEK_HOLE
 4

	)

44 
	#SEEK_MAX
 
SEEK_HOLE


	)

46 
	#RENAME_NOREPLACE
 (1 << 0è

	)

47 
	#RENAME_EXCHANGE
 (1 << 1è

	)

48 
	#RENAME_WHITEOUT
 (1 << 2è

	)

50 
	sfže_þÚe_¿nge
 {

51 
__s64
 
	m¤c_fd
;

52 
__u64
 
	m¤c_off£t
;

53 
__u64
 
	m¤c_Ëngth
;

54 
__u64
 
	mde¡_off£t
;

57 
	sf¡rim_¿nge
 {

58 
__u64
 
	m¡¬t
;

59 
__u64
 
	mËn
;

60 
__u64
 
	mmšËn
;

64 
	#FILE_DEDUPE_RANGE_SAME
 0

	)

65 
	#FILE_DEDUPE_RANGE_DIFFERS
 1

	)

68 
	sfže_dedu³_¿nge_šfo
 {

69 
__s64
 
	mde¡_fd
;

70 
__u64
 
	mde¡_off£t
;

71 
__u64
 
	mby‹s_dedu³d
;

78 
__s32
 
	m¡©us
;

79 
__u32
 
	m»£rved
;

83 
	sfže_dedu³_¿nge
 {

84 
__u64
 
	m¤c_off£t
;

85 
__u64
 
	m¤c_Ëngth
;

86 
__u16
 
	mde¡_couÁ
;

87 
__u16
 
	m»£rved1
;

88 
__u32
 
	m»£rved2
;

89 
fže_dedu³_¿nge_šfo
 
	mšfo
[0];

93 
	sfžes_¡©_¡ruù
 {

94 
	mÄ_fžes
;

95 
	mÄ_ä“_fžes
;

96 
	mmax_fžes
;

99 
	sšodes_¡©_t
 {

100 
	mÄ_šodes
;

101 
	mÄ_unu£d
;

102 
	mdummy
[5];

106 
	#NR_FILE
 8192

	)

111 
	sfsx©Œ
 {

112 
__u32
 
	mfsx_xæags
;

113 
__u32
 
	mfsx_extsize
;

114 
__u32
 
	mfsx_Ãx‹Ás
;

115 
__u32
 
	mfsx_´ojid
;

116 
__u32
 
	mfsx_cowextsize
;

117 
	mfsx_·d
[8];

123 
	#FS_XFLAG_REALTIME
 0x00000001

	)

124 
	#FS_XFLAG_PREALLOC
 0x00000002

	)

125 
	#FS_XFLAG_IMMUTABLE
 0x00000008

	)

126 
	#FS_XFLAG_APPEND
 0x00000010

	)

127 
	#FS_XFLAG_SYNC
 0x00000020

	)

128 
	#FS_XFLAG_NOATIME
 0x00000040

	)

129 
	#FS_XFLAG_NODUMP
 0x00000080

	)

130 
	#FS_XFLAG_RTINHERIT
 0x00000100

	)

131 
	#FS_XFLAG_PROJINHERIT
 0x00000200

	)

132 
	#FS_XFLAG_NOSYMLINKS
 0x00000400

	)

133 
	#FS_XFLAG_EXTSIZE
 0x00000800

	)

134 
	#FS_XFLAG_EXTSZINHERIT
 0x00001000

	)

135 
	#FS_XFLAG_NODEFRAG
 0x00002000

	)

136 
	#FS_XFLAG_FILESTREAM
 0x00004000

	)

137 
	#FS_XFLAG_DAX
 0x00008000

	)

138 
	#FS_XFLAG_COWEXTSIZE
 0x00010000

	)

139 
	#FS_XFLAG_HASATTR
 0x80000000

	)

144 
	#BLKROSET
 
	`_IO
(0x12,93è

	)

145 
	#BLKROGET
 
	`_IO
(0x12,94è

	)

146 
	#BLKRRPART
 
	`_IO
(0x12,95è

	)

147 
	#BLKGETSIZE
 
	`_IO
(0x12,96è

	)

148 
	#BLKFLSBUF
 
	`_IO
(0x12,97è

	)

149 
	#BLKRASET
 
	`_IO
(0x12,98è

	)

150 
	#BLKRAGET
 
	`_IO
(0x12,99è

	)

151 
	#BLKFRASET
 
	`_IO
(0x12,100)

	)

152 
	#BLKFRAGET
 
	`_IO
(0x12,101)

	)

153 
	#BLKSECTSET
 
	`_IO
(0x12,102)

	)

154 
	#BLKSECTGET
 
	`_IO
(0x12,103)

	)

155 
	#BLKSSZGET
 
	`_IO
(0x12,104)

	)

157 
	#BLKPG
 
	`_IO
(0x12,105)

	)

161 
	#BLKELVGET
 
	`_IOR
(0x12,106,
size_t
)

	)

162 
	#BLKELVSET
 
	`_IOW
(0x12,107,
size_t
)

	)

167 
	#BLKBSZGET
 
	`_IOR
(0x12,112,
size_t
)

	)

168 
	#BLKBSZSET
 
	`_IOW
(0x12,113,
size_t
)

	)

169 
	#BLKGETSIZE64
 
	`_IOR
(0x12,114,
size_t
è

	)

170 
	#BLKTRACESETUP
 
	`_IOWR
(0x12,115,
blk_u£r_Œaû_£tup
)

	)

171 
	#BLKTRACESTART
 
	`_IO
(0x12,116)

	)

172 
	#BLKTRACESTOP
 
	`_IO
(0x12,117)

	)

173 
	#BLKTRACETEARDOWN
 
	`_IO
(0x12,118)

	)

174 
	#BLKDISCARD
 
	`_IO
(0x12,119)

	)

175 
	#BLKIOMIN
 
	`_IO
(0x12,120)

	)

176 
	#BLKIOOPT
 
	`_IO
(0x12,121)

	)

177 
	#BLKALIGNOFF
 
	`_IO
(0x12,122)

	)

178 
	#BLKPBSZGET
 
	`_IO
(0x12,123)

	)

179 
	#BLKDISCARDZEROES
 
	`_IO
(0x12,124)

	)

180 
	#BLKSECDISCARD
 
	`_IO
(0x12,125)

	)

181 
	#BLKROTATIONAL
 
	`_IO
(0x12,126)

	)

182 
	#BLKZEROOUT
 
	`_IO
(0x12,127)

	)

188 
	#BMAP_IOCTL
 1

	)

189 
	#FIBMAP
 
	`_IO
(0x00,1è

	)

190 
	#FIGETBSZ
 
	`_IO
(0x00,2è

	)

191 
	#FIFREEZE
 
	`_IOWR
('X', 119, è

	)

192 
	#FITHAW
 
	`_IOWR
('X', 120, è

	)

193 
	#FITRIM
 
	`_IOWR
('X', 121, 
f¡rim_¿nge
è

	)

194 
	#FICLONE
 
	`_IOW
(0x94, 9, )

	)

195 
	#FICLONERANGE
 
	`_IOW
(0x94, 13, 
fže_þÚe_¿nge
)

	)

196 
	#FIDEDUPERANGE
 
	`_IOWR
(0x94, 54, 
fže_dedu³_¿nge
)

	)

198 
	#FSLABEL_MAX
 256

	)

200 
	#FS_IOC_GETFLAGS
 
	`_IOR
('f', 1, )

	)

201 
	#FS_IOC_SETFLAGS
 
	`_IOW
('f', 2, )

	)

202 
	#FS_IOC_GETVERSION
 
	`_IOR
('v', 1, )

	)

203 
	#FS_IOC_SETVERSION
 
	`_IOW
('v', 2, )

	)

204 
	#FS_IOC_FIEMAP
 
	`_IOWR
('f', 11, 
f›m­
)

	)

205 
	#FS_IOC32_GETFLAGS
 
	`_IOR
('f', 1, )

	)

206 
	#FS_IOC32_SETFLAGS
 
	`_IOW
('f', 2, )

	)

207 
	#FS_IOC32_GETVERSION
 
	`_IOR
('v', 1, )

	)

208 
	#FS_IOC32_SETVERSION
 
	`_IOW
('v', 2, )

	)

209 
	#FS_IOC_FSGETXATTR
 
	`_IOR
('X', 31, 
fsx©Œ
)

	)

210 
	#FS_IOC_FSSETXATTR
 
	`_IOW
('X', 32, 
fsx©Œ
)

	)

211 
	#FS_IOC_GETFSLABEL
 
	`_IOR
(0x94, 49, [
FSLABEL_MAX
])

	)

212 
	#FS_IOC_SETFSLABEL
 
	`_IOW
(0x94, 50, [
FSLABEL_MAX
])

	)

234 
	#FS_SECRM_FL
 0x00000001

	)

235 
	#FS_UNRM_FL
 0x00000002

	)

236 
	#FS_COMPR_FL
 0x00000004

	)

237 
	#FS_SYNC_FL
 0x00000008

	)

238 
	#FS_IMMUTABLE_FL
 0x00000010

	)

239 
	#FS_APPEND_FL
 0x00000020

	)

240 
	#FS_NODUMP_FL
 0x00000040

	)

241 
	#FS_NOATIME_FL
 0x00000080

	)

243 
	#FS_DIRTY_FL
 0x00000100

	)

244 
	#FS_COMPRBLK_FL
 0x00000200

	)

245 
	#FS_NOCOMP_FL
 0x00000400

	)

247 
	#FS_ENCRYPT_FL
 0x00000800

	)

248 
	#FS_BTREE_FL
 0x00001000

	)

249 
	#FS_INDEX_FL
 0x00001000

	)

250 
	#FS_IMAGIC_FL
 0x00002000

	)

251 
	#FS_JOURNAL_DATA_FL
 0x00004000

	)

252 
	#FS_NOTAIL_FL
 0x00008000

	)

253 
	#FS_DIRSYNC_FL
 0x00010000

	)

254 
	#FS_TOPDIR_FL
 0x00020000

	)

255 
	#FS_HUGE_FILE_FL
 0x00040000

	)

256 
	#FS_EXTENT_FL
 0x00080000

	)

257 
	#FS_VERITY_FL
 0x00100000

	)

258 
	#FS_EA_INODE_FL
 0x00200000

	)

259 
	#FS_EOFBLOCKS_FL
 0x00400000

	)

260 
	#FS_NOCOW_FL
 0x00800000

	)

261 
	#FS_INLINE_DATA_FL
 0x10000000

	)

262 
	#FS_PROJINHERIT_FL
 0x20000000

	)

263 
	#FS_CASEFOLD_FL
 0x40000000

	)

264 
	#FS_RESERVED_FL
 0x80000000

	)

266 
	#FS_FL_USER_VISIBLE
 0x0003DFFF

	)

267 
	#FS_FL_USER_MODIFIABLE
 0x000380FF

	)

270 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

271 
	#SYNC_FILE_RANGE_WRITE
 2

	)

272 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

273 
	#SYNC_FILE_RANGE_WRITE_AND_WAIT
 (
SYNC_FILE_RANGE_WRITE
 | \

274 
SYNC_FILE_RANGE_WAIT_BEFORE
 | \

275 
SYNC_FILE_RANGE_WAIT_AFTER
)

	)

281 
	t__b™wi£
 
	t__k”Ãl_rwf_t
;

284 
	#RWF_HIPRI
 ((
__k”Ãl_rwf_t
)0x00000001)

	)

287 
	#RWF_DSYNC
 ((
__k”Ãl_rwf_t
)0x00000002)

	)

290 
	#RWF_SYNC
 ((
__k”Ãl_rwf_t
)0x00000004)

	)

293 
	#RWF_NOWAIT
 ((
__k”Ãl_rwf_t
)0x00000008)

	)

296 
	#RWF_APPEND
 ((
__k”Ãl_rwf_t
)0x00000010)

	)

299 
	#RWF_SUPPORTED
 (
RWF_HIPRI
 | 
RWF_DSYNC
 | 
RWF_SYNC
 | 
RWF_NOWAIT
 |\

300 
RWF_APPEND
)

	)

	@/usr/include/linux/mman.h

2 #iâdeà
_LINUX_MMAN_H


3 
	#_LINUX_MMAN_H


	)

5 
	~<asm/mmª.h
>

6 
	~<asm-g’”ic/hug‘lb_’code.h
>

8 
	#MREMAP_MAYMOVE
 1

	)

9 
	#MREMAP_FIXED
 2

	)

11 
	#OVERCOMMIT_GUESS
 0

	)

12 
	#OVERCOMMIT_ALWAYS
 1

	)

13 
	#OVERCOMMIT_NEVER
 2

	)

15 
	#MAP_SHARED
 0x01

	)

16 
	#MAP_PRIVATE
 0x02

	)

17 
	#MAP_SHARED_VALIDATE
 0x03

	)

26 
	#MAP_HUGE_SHIFT
 
HUGETLB_FLAG_ENCODE_SHIFT


	)

27 
	#MAP_HUGE_MASK
 
HUGETLB_FLAG_ENCODE_MASK


	)

29 
	#MAP_HUGE_64KB
 
HUGETLB_FLAG_ENCODE_64KB


	)

30 
	#MAP_HUGE_512KB
 
HUGETLB_FLAG_ENCODE_512KB


	)

31 
	#MAP_HUGE_1MB
 
HUGETLB_FLAG_ENCODE_1MB


	)

32 
	#MAP_HUGE_2MB
 
HUGETLB_FLAG_ENCODE_2MB


	)

33 
	#MAP_HUGE_8MB
 
HUGETLB_FLAG_ENCODE_8MB


	)

34 
	#MAP_HUGE_16MB
 
HUGETLB_FLAG_ENCODE_16MB


	)

35 
	#MAP_HUGE_32MB
 
HUGETLB_FLAG_ENCODE_32MB


	)

36 
	#MAP_HUGE_256MB
 
HUGETLB_FLAG_ENCODE_256MB


	)

37 
	#MAP_HUGE_512MB
 
HUGETLB_FLAG_ENCODE_512MB


	)

38 
	#MAP_HUGE_1GB
 
HUGETLB_FLAG_ENCODE_1GB


	)

39 
	#MAP_HUGE_2GB
 
HUGETLB_FLAG_ENCODE_2GB


	)

40 
	#MAP_HUGE_16GB
 
HUGETLB_FLAG_ENCODE_16GB


	)

	@/usr/include/linux/uio.h

10 #iâdeà
__LINUX_UIO_H


11 
	#__LINUX_UIO_H


	)

14 
	~<lšux/ty³s.h
>

17 
	siovec


19 *
	miov_ba£
;

20 
__k”Ãl_size_t
 
	miov_Ën
;

27 
	#UIO_FASTIOV
 8

	)

28 
	#UIO_MAXIOV
 1024

	)

	@/usr/include/asm-generic/hugetlb_encode.h

1 #iâdeà
_ASM_GENERIC_HUGETLB_ENCODE_H_


2 
	#_ASM_GENERIC_HUGETLB_ENCODE_H_


	)

20 
	#HUGETLB_FLAG_ENCODE_SHIFT
 26

	)

21 
	#HUGETLB_FLAG_ENCODE_MASK
 0x3f

	)

23 
	#HUGETLB_FLAG_ENCODE_64KB
 (16 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

24 
	#HUGETLB_FLAG_ENCODE_512KB
 (19 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

25 
	#HUGETLB_FLAG_ENCODE_1MB
 (20 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

26 
	#HUGETLB_FLAG_ENCODE_2MB
 (21 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

27 
	#HUGETLB_FLAG_ENCODE_8MB
 (23 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

28 
	#HUGETLB_FLAG_ENCODE_16MB
 (24 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

29 
	#HUGETLB_FLAG_ENCODE_32MB
 (25 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

30 
	#HUGETLB_FLAG_ENCODE_256MB
 (28 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

31 
	#HUGETLB_FLAG_ENCODE_512MB
 (29 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

32 
	#HUGETLB_FLAG_ENCODE_1GB
 (30 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

33 
	#HUGETLB_FLAG_ENCODE_2GB
 (31 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

34 
	#HUGETLB_FLAG_ENCODE_16GB
 (34 << 
HUGETLB_FLAG_ENCODE_SHIFT
)

	)

	@/usr/include/linux/fscrypt.h

8 #iâdeà
_LINUX_FSCRYPT_H


9 
	#_LINUX_FSCRYPT_H


	)

11 
	~<lšux/ty³s.h
>

14 
	#FSCRYPT_POLICY_FLAGS_PAD_4
 0x00

	)

15 
	#FSCRYPT_POLICY_FLAGS_PAD_8
 0x01

	)

16 
	#FSCRYPT_POLICY_FLAGS_PAD_16
 0x02

	)

17 
	#FSCRYPT_POLICY_FLAGS_PAD_32
 0x03

	)

18 
	#FSCRYPT_POLICY_FLAGS_PAD_MASK
 0x03

	)

19 
	#FSCRYPT_POLICY_FLAG_DIRECT_KEY
 0x04

	)

22 
	#FSCRYPT_MODE_AES_256_XTS
 1

	)

23 
	#FSCRYPT_MODE_AES_256_CTS
 4

	)

24 
	#FSCRYPT_MODE_AES_128_CBC
 5

	)

25 
	#FSCRYPT_MODE_AES_128_CTS
 6

	)

26 
	#FSCRYPT_MODE_ADIANTUM
 9

	)

35 
	#FSCRYPT_POLICY_V1
 0

	)

36 
	#FSCRYPT_KEY_DESCRIPTOR_SIZE
 8

	)

37 
	sfsüy±_pÞicy_v1
 {

38 
__u8
 
	mv”siÚ
;

39 
__u8
 
	mcÚ‹Ás_’üy±iÚ_mode
;

40 
__u8
 
	mfž’ames_’üy±iÚ_mode
;

41 
__u8
 
	mæags
;

42 
__u8
 
	mma¡”_key_desütÜ
[
FSCRYPT_KEY_DESCRIPTOR_SIZE
];

44 
	#fsüy±_pÞicy
 
fsüy±_pÞicy_v1


	)

50 
	#FSCRYPT_KEY_DESC_PREFIX
 "fsüy±:"

	)

51 
	#FSCRYPT_KEY_DESC_PREFIX_SIZE
 8

	)

52 
	#FSCRYPT_MAX_KEY_SIZE
 64

	)

53 
	sfsüy±_key
 {

54 
__u32
 
	mmode
;

55 
__u8
 
	m¿w
[
FSCRYPT_MAX_KEY_SIZE
];

56 
__u32
 
	msize
;

62 
	#FSCRYPT_POLICY_V2
 2

	)

63 
	#FSCRYPT_KEY_IDENTIFIER_SIZE
 16

	)

64 
	sfsüy±_pÞicy_v2
 {

65 
__u8
 
	mv”siÚ
;

66 
__u8
 
	mcÚ‹Ás_’üy±iÚ_mode
;

67 
__u8
 
	mfž’ames_’üy±iÚ_mode
;

68 
__u8
 
	mæags
;

69 
__u8
 
	m__»£rved
[4];

70 
__u8
 
	mma¡”_key_id’tif›r
[
FSCRYPT_KEY_IDENTIFIER_SIZE
];

74 
	sfsüy±_g‘_pÞicy_ex_¬g
 {

75 
__u64
 
	mpÞicy_size
;

77 
__u8
 
	mv”siÚ
;

78 
fsüy±_pÞicy_v1
 
	mv1
;

79 
fsüy±_pÞicy_v2
 
	mv2
;

80 } 
	mpÞicy
;

87 
	#FSCRYPT_KEY_SPEC_TYPE_DESCRIPTOR
 1

	)

94 
	#FSCRYPT_KEY_SPEC_TYPE_IDENTIFIER
 2

	)

100 
	sfsüy±_key_¥ecif›r
 {

101 
__u32
 
	mty³
;

102 
__u32
 
	m__»£rved
;

104 
__u8
 
	m__»£rved
[32];

105 
__u8
 
	mdesütÜ
[
FSCRYPT_KEY_DESCRIPTOR_SIZE
];

106 
__u8
 
	mid’tif›r
[
FSCRYPT_KEY_IDENTIFIER_SIZE
];

107 } 
	mu
;

111 
	sfsüy±_add_key_¬g
 {

112 
fsüy±_key_¥ecif›r
 
	mkey_¥ec
;

113 
__u32
 
	m¿w_size
;

114 
__u32
 
	m__»£rved
[9];

115 
__u8
 
	m¿w
[];

119 
	sfsüy±_»move_key_¬g
 {

120 
fsüy±_key_¥ecif›r
 
	mkey_¥ec
;

121 
	#FSCRYPT_KEY_REMOVAL_STATUS_FLAG_FILES_BUSY
 0x00000001

	)

122 
	#FSCRYPT_KEY_REMOVAL_STATUS_FLAG_OTHER_USERS
 0x00000002

	)

123 
__u32
 
	m»mov®_¡©us_æags
;

124 
__u32
 
	m__»£rved
[5];

128 
	sfsüy±_g‘_key_¡©us_¬g
 {

130 
fsüy±_key_¥ecif›r
 
	mkey_¥ec
;

131 
__u32
 
	m__»£rved
[6];

134 
	#FSCRYPT_KEY_STATUS_ABSENT
 1

	)

135 
	#FSCRYPT_KEY_STATUS_PRESENT
 2

	)

136 
	#FSCRYPT_KEY_STATUS_INCOMPLETELY_REMOVED
 3

	)

137 
__u32
 
	m¡©us
;

138 
	#FSCRYPT_KEY_STATUS_FLAG_ADDED_BY_SELF
 0x00000001

	)

139 
__u32
 
	m¡©us_æags
;

140 
__u32
 
	mu£r_couÁ
;

141 
__u32
 
	m__out_»£rved
[13];

144 
	#FS_IOC_SET_ENCRYPTION_POLICY
 
	`_IOR
('f', 19, 
fsüy±_pÞicy
)

	)

145 
	#FS_IOC_GET_ENCRYPTION_PWSALT
 
	`_IOW
('f', 20, 
__u8
[16])

	)

146 
	#FS_IOC_GET_ENCRYPTION_POLICY
 
	`_IOW
('f', 21, 
fsüy±_pÞicy
)

	)

147 
	#FS_IOC_GET_ENCRYPTION_POLICY_EX
 
	`_IOWR
('f', 22, 
__u8
[9]è

	)

148 
	#FS_IOC_ADD_ENCRYPTION_KEY
 
	`_IOWR
('f', 23, 
fsüy±_add_key_¬g
)

	)

149 
	#FS_IOC_REMOVE_ENCRYPTION_KEY
 
	`_IOWR
('f', 24, 
fsüy±_»move_key_¬g
)

	)

150 
	#FS_IOC_REMOVE_ENCRYPTION_KEY_ALL_USERS
 
	`_IOWR
('f', 25, 
fsüy±_»move_key_¬g
)

	)

151 
	#FS_IOC_GET_ENCRYPTION_KEY_STATUS
 
	`_IOWR
('f', 26, 
fsüy±_g‘_key_¡©us_¬g
)

	)

156 
	#FS_KEY_DESCRIPTOR_SIZE
 
FSCRYPT_KEY_DESCRIPTOR_SIZE


	)

157 
	#FS_POLICY_FLAGS_PAD_4
 
FSCRYPT_POLICY_FLAGS_PAD_4


	)

158 
	#FS_POLICY_FLAGS_PAD_8
 
FSCRYPT_POLICY_FLAGS_PAD_8


	)

159 
	#FS_POLICY_FLAGS_PAD_16
 
FSCRYPT_POLICY_FLAGS_PAD_16


	)

160 
	#FS_POLICY_FLAGS_PAD_32
 
FSCRYPT_POLICY_FLAGS_PAD_32


	)

161 
	#FS_POLICY_FLAGS_PAD_MASK
 
FSCRYPT_POLICY_FLAGS_PAD_MASK


	)

162 
	#FS_POLICY_FLAG_DIRECT_KEY
 
FSCRYPT_POLICY_FLAG_DIRECT_KEY


	)

163 
	#FS_POLICY_FLAGS_VALID
 0x07

	)

164 
	#FS_ENCRYPTION_MODE_INVALID
 0

	)

165 
	#FS_ENCRYPTION_MODE_AES_256_XTS
 
FSCRYPT_MODE_AES_256_XTS


	)

166 
	#FS_ENCRYPTION_MODE_AES_256_GCM
 2

	)

167 
	#FS_ENCRYPTION_MODE_AES_256_CBC
 3

	)

168 
	#FS_ENCRYPTION_MODE_AES_256_CTS
 
FSCRYPT_MODE_AES_256_CTS


	)

169 
	#FS_ENCRYPTION_MODE_AES_128_CBC
 
FSCRYPT_MODE_AES_128_CBC


	)

170 
	#FS_ENCRYPTION_MODE_AES_128_CTS
 
FSCRYPT_MODE_AES_128_CTS


	)

171 
	#FS_ENCRYPTION_MODE_SPECK128_256_XTS
 7

	)

172 
	#FS_ENCRYPTION_MODE_SPECK128_256_CTS
 8

	)

173 
	#FS_ENCRYPTION_MODE_ADIANTUM
 
FSCRYPT_MODE_ADIANTUM


	)

174 
	#FS_KEY_DESC_PREFIX
 
FSCRYPT_KEY_DESC_PREFIX


	)

175 
	#FS_KEY_DESC_PREFIX_SIZE
 
FSCRYPT_KEY_DESC_PREFIX_SIZE


	)

176 
	#FS_MAX_KEY_SIZE
 
FSCRYPT_MAX_KEY_SIZE


	)

	@/usr/include/linux/ioctl.h

2 #iâdeà
_LINUX_IOCTL_H


3 
	#_LINUX_IOCTL_H


	)

5 
	~<asm/ioùl.h
>

	@/usr/include/linux/limits.h

2 #iâdeà
_LINUX_LIMITS_H


3 
	#_LINUX_LIMITS_H


	)

5 
	#NR_OPEN
 1024

	)

7 
	#NGROUPS_MAX
 65536

	)

8 
	#ARG_MAX
 131072

	)

9 
	#LINK_MAX
 127

	)

10 
	#MAX_CANON
 255

	)

11 
	#MAX_INPUT
 255

	)

12 
	#NAME_MAX
 255

	)

13 
	#PATH_MAX
 4096

	)

14 
	#PIPE_BUF
 4096

	)

15 
	#XATTR_NAME_MAX
 255

	)

16 
	#XATTR_SIZE_MAX
 65536

	)

17 
	#XATTR_LIST_MAX
 65536

	)

19 
	#RTSIG_MAX
 32

	)

	@/usr/include/linux/mount.h

1 #iâdeà
_LINUX_MOUNT_H


2 
	#_LINUX_MOUNT_H


	)

11 
	#MS_RDONLY
 1

	)

12 
	#MS_NOSUID
 2

	)

13 
	#MS_NODEV
 4

	)

14 
	#MS_NOEXEC
 8

	)

15 
	#MS_SYNCHRONOUS
 16

	)

16 
	#MS_REMOUNT
 32

	)

17 
	#MS_MANDLOCK
 64

	)

18 
	#MS_DIRSYNC
 128

	)

19 
	#MS_NOATIME
 1024

	)

20 
	#MS_NODIRATIME
 2048

	)

21 
	#MS_BIND
 4096

	)

22 
	#MS_MOVE
 8192

	)

23 
	#MS_REC
 16384

	)

24 
	#MS_VERBOSE
 32768

	)

26 
	#MS_SILENT
 32768

	)

27 
	#MS_POSIXACL
 (1<<16è

	)

28 
	#MS_UNBINDABLE
 (1<<17è

	)

29 
	#MS_PRIVATE
 (1<<18è

	)

30 
	#MS_SLAVE
 (1<<19è

	)

31 
	#MS_SHARED
 (1<<20è

	)

32 
	#MS_RELATIME
 (1<<21è

	)

33 
	#MS_KERNMOUNT
 (1<<22è

	)

34 
	#MS_I_VERSION
 (1<<23è

	)

35 
	#MS_STRICTATIME
 (1<<24è

	)

36 
	#MS_LAZYTIME
 (1<<25è

	)

39 
	#MS_SUBMOUNT
 (1<<26)

	)

40 
	#MS_NOREMOTELOCK
 (1<<27)

	)

41 
	#MS_NOSEC
 (1<<28)

	)

42 
	#MS_BORN
 (1<<29)

	)

43 
	#MS_ACTIVE
 (1<<30)

	)

44 
	#MS_NOUSER
 (1<<31)

	)

49 
	#MS_RMT_MASK
 (
MS_RDONLY
|
MS_SYNCHRONOUS
|
MS_MANDLOCK
|
MS_I_VERSION
|\

50 
MS_LAZYTIME
)

	)

55 
	#MS_MGC_VAL
 0xC0ED0000

	)

56 
	#MS_MGC_MSK
 0xffff0000

	)

61 
	#OPEN_TREE_CLONE
 1

	)

62 
	#OPEN_TREE_CLOEXEC
 
O_CLOEXEC


	)

67 
	#MOVE_MOUNT_F_SYMLINKS
 0x00000001

	)

68 
	#MOVE_MOUNT_F_AUTOMOUNTS
 0x00000002

	)

69 
	#MOVE_MOUNT_F_EMPTY_PATH
 0x00000004

	)

70 
	#MOVE_MOUNT_T_SYMLINKS
 0x00000010

	)

71 
	#MOVE_MOUNT_T_AUTOMOUNTS
 0x00000020

	)

72 
	#MOVE_MOUNT_T_EMPTY_PATH
 0x00000040

	)

73 
	#MOVE_MOUNT__MASK
 0x00000077

	)

78 
	#FSOPEN_CLOEXEC
 0x00000001

	)

83 
	#FSPICK_CLOEXEC
 0x00000001

	)

84 
	#FSPICK_SYMLINK_NOFOLLOW
 0x00000002

	)

85 
	#FSPICK_NO_AUTOMOUNT
 0x00000004

	)

86 
	#FSPICK_EMPTY_PATH
 0x00000008

	)

91 
	efscÚfig_commªd
 {

92 
	mFSCONFIG_SET_FLAG
 = 0,

93 
	mFSCONFIG_SET_STRING
 = 1,

94 
	mFSCONFIG_SET_BINARY
 = 2,

95 
	mFSCONFIG_SET_PATH
 = 3,

96 
	mFSCONFIG_SET_PATH_EMPTY
 = 4,

97 
	mFSCONFIG_SET_FD
 = 5,

98 
	mFSCONFIG_CMD_CREATE
 = 6,

99 
	mFSCONFIG_CMD_RECONFIGURE
 = 7,

105 
	#FSMOUNT_CLOEXEC
 0x00000001

	)

110 
	#MOUNT_ATTR_RDONLY
 0x00000001

	)

111 
	#MOUNT_ATTR_NOSUID
 0x00000002

	)

112 
	#MOUNT_ATTR_NODEV
 0x00000004

	)

113 
	#MOUNT_ATTR_NOEXEC
 0x00000008

	)

114 
	#MOUNT_ATTR__ATIME
 0x00000070

	)

115 
	#MOUNT_ATTR_RELATIME
 0x00000000

	)

116 
	#MOUNT_ATTR_NOATIME
 0x00000010

	)

117 
	#MOUNT_ATTR_STRICTATIME
 0x00000020

	)

118 
	#MOUNT_ATTR_NODIRATIME
 0x00000080

	)

	@/usr/include/linux/time.h

2 #iâdeà
_LINUX_TIME_H


3 
	#_LINUX_TIME_H


	)

5 
	~<lšux/ty³s.h
>

6 
	~<lšux/time_ty³s.h
>

8 #iâdeà
_STRUCT_TIMESPEC


9 
	#_STRUCT_TIMESPEC


	)

10 
	stime¥ec
 {

11 
__k”Ãl_time_t
 
	mtv_£c
;

12 
	mtv_n£c
;

16 
	stimev®
 {

17 
__k”Ãl_time_t
 
	mtv_£c
;

18 
__k”Ãl_su£cÚds_t
 
	mtv_u£c
;

21 
	stimezÚe
 {

22 
	mtz_mšu‹swe¡
;

23 
	mtz_d¡time
;

30 
	#ITIMER_REAL
 0

	)

31 
	#ITIMER_VIRTUAL
 1

	)

32 
	#ITIMER_PROF
 2

	)

34 
	s™im”¥ec
 {

35 
time¥ec
 
	m™_š‹rv®
;

36 
time¥ec
 
	m™_v®ue
;

39 
	s™im”v®
 {

40 
timev®
 
	m™_š‹rv®
;

41 
timev®
 
	m™_v®ue
;

47 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

49 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

50 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

51 
	#CLOCK_MONOTONIC_RAW
 4

	)

52 
	#CLOCK_REALTIME_COARSE
 5

	)

53 
	#CLOCK_MONOTONIC_COARSE
 6

	)

54 
	#CLOCK_BOOTTIME
 7

	)

55 
	#CLOCK_REALTIME_ALARM
 8

	)

56 
	#CLOCK_BOOTTIME_ALARM
 9

	)

61 
	#CLOCK_SGI_CYCLE
 10

	)

62 
	#CLOCK_TAI
 11

	)

64 
	#MAX_CLOCKS
 16

	)

65 
	#CLOCKS_MASK
 (
CLOCK_REALTIME
 | 
CLOCK_MONOTONIC
)

	)

66 
	#CLOCKS_MONO
 
CLOCK_MONOTONIC


	)

71 
	#TIMER_ABSTIME
 0x01

	)

	@/usr/include/linux/types.h

2 #iâdeà
_LINUX_TYPES_H


3 
	#_LINUX_TYPES_H


	)

5 
	~<asm/ty³s.h
>

7 #iâdeà
__ASSEMBLY__


9 
	~<lšux/posix_ty³s.h
>

17 #ifdeà
__CHECKER__


18 
	#__b™wi£__
 
	`__©Œibu‹__
((
b™wi£
))

	)

20 
	#__b™wi£__


	)

22 
	#__b™wi£
 
__b™wi£__


	)

24 
__u16
 
	t__b™wi£
 
	t__Ë16
;

25 
__u16
 
	t__b™wi£
 
	t__be16
;

26 
__u32
 
	t__b™wi£
 
	t__Ë32
;

27 
__u32
 
	t__b™wi£
 
	t__be32
;

28 
__u64
 
	t__b™wi£
 
	t__Ë64
;

29 
__u64
 
	t__b™wi£
 
	t__be64
;

31 
__u16
 
	t__b™wi£
 
	t__sum16
;

32 
__u32
 
	t__b™wi£
 
	t__wsum
;

43 
	#__®igÃd_u64
 
__u64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

44 
	#__®igÃd_be64
 
__be64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

45 
	#__®igÃd_Ë64
 
__Ë64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

47 
	t__b™wi£
 
	t__pÞl_t
;

	@/usr/include/linux/posix_types.h

2 #iâdeà
_LINUX_POSIX_TYPES_H


3 
	#_LINUX_POSIX_TYPES_H


	)

5 
	~<lšux/¡ddef.h
>

22 #undeà
__FD_SETSIZE


23 
	#__FD_SETSIZE
 1024

	)

26 
	mfds_b™s
[
__FD_SETSIZE
 / (8 * ())];

27 } 
	t__k”Ãl_fd_£t
;

30 (*
	t__k”Ãl_sighªdËr_t
)();

33 
	t__k”Ãl_key_t
;

34 
	t__k”Ãl_mqd_t
;

36 
	~<asm/posix_ty³s.h
>

	@/usr/include/linux/time_types.h

2 #iâdeà
_LINUX_TIME_TYPES_H


3 
	#_LINUX_TIME_TYPES_H


	)

5 
	~<lšux/ty³s.h
>

7 
	s__k”Ãl_time¥ec
 {

8 
__k”Ãl_time64_t
 
	mtv_£c
;

9 
	mtv_n£c
;

12 
	s__k”Ãl_™im”¥ec
 {

13 
__k”Ãl_time¥ec
 
	m™_š‹rv®
;

14 
__k”Ãl_time¥ec
 
	m™_v®ue
;

24 #iâdeà
__k”Ãl_Þd_timev®


25 
	s__k”Ãl_Þd_timev®
 {

26 
__k”Ãl_lÚg_t
 
	mtv_£c
;

27 
__k”Ãl_lÚg_t
 
	mtv_u£c
;

31 
	s__k”Ãl_sock_timev®
 {

32 
__s64
 
	mtv_£c
;

33 
__s64
 
	mtv_u£c
;

	@/usr/include/linux/stddef.h

4 #iâdeà
__®ways_šlše


5 
	#__®ways_šlše
 
__šlše__


	)

	@
1
.
1
/usr/include
17
441
filemap.c
internal.h
../calclock.h
/usr/include/linux/capability.h
/usr/include/linux/fs.h
/usr/include/linux/mman.h
/usr/include/linux/uio.h
/usr/include/asm-generic/hugetlb_encode.h
/usr/include/linux/fscrypt.h
/usr/include/linux/ioctl.h
/usr/include/linux/limits.h
/usr/include/linux/mount.h
/usr/include/linux/time.h
/usr/include/linux/types.h
/usr/include/linux/posix_types.h
/usr/include/linux/time_types.h
/usr/include/linux/stddef.h
